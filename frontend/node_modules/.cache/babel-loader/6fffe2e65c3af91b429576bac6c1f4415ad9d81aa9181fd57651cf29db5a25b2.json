{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\db-nair-cunha\\\\teste-db-matricula-nair-cunha-de-aguiar\\\\frontend\\\\src\\\\DeclaracaoModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport jsPDF from 'jspdf';\nimport './DeclaracaoModal.css';\n\n// üî• CORRE√á√ÉO: Use caminho p√∫blico\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst backgroundImage = '/img/background.png';\nconst DeclaracaoModal = ({\n  aluno,\n  onClose\n}) => {\n  _s();\n  const [tipoDeclaracao, setTipoDeclaracao] = useState('vaga');\n  const [pdfUrl, setPdfUrl] = useState('');\n  const [pdfGerado, setPdfGerado] = useState(false);\n  const previewRef = useRef(null);\n  const tiposDeclaracao = {\n    vaga: {\n      nome: 'Declara√ß√£o de Vaga Dispon√≠vel',\n      template: aluno => {\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\n        const serie = aluno.serieAno || '____';\n        const turma = aluno.turma || '';\n        return `Declaramos, para os devidos fins de prova e efeitos legais, que temos vaga no ${serie}¬∫ ano ${turma}, turnos manh√£ e tarde, para o(a) aluno(a) ${aluno.nome.toUpperCase()}, nascido(a) em ${dataNasc}.`;\n      },\n      adicional: `O referido √© verdade e dou f√©.`\n    },\n    matricula: {\n      nome: 'Declara√ß√£o de Matr√≠cula',\n      template: aluno => {\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\n        const serie = aluno.serieAno || '____';\n        const turma = aluno.turma || '';\n        return `Declaramos, para os devidos fins, que ${aluno.nome}, nascido(a) em ${dataNasc}, encontra-se regularmente matriculado(a) no ${serie}¬∫ ano ${turma} do Ensino Fundamental ${parseInt(serie) <= 5 ? 'I' : 'II'} desta institui√ß√£o de ensino.`;\n      },\n      adicional: `Documento v√°lido para comprova√ß√£o de matr√≠cula junto aos √≥rg√£os competentes.`\n    },\n    transferencia: {\n      nome: 'Declara√ß√£o de Transfer√™ncia',\n      template: aluno => {\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\n        const serie = aluno.serieAno || '____';\n        const turma = aluno.turma || '';\n        return `Declaramos que ${aluno.nome}, nascido(a) em ${dataNasc}, est√° regularmente matriculado(a) no ${serie}¬∫ ano ${turma} e solicita transfer√™ncia para outra institui√ß√£o de ensino.`;\n      },\n      adicional: `Atestamos a regularidade de sua situa√ß√£o escolar para fins de transfer√™ncia.`\n    },\n    frequencia: {\n      nome: 'Declara√ß√£o de Frequ√™ncia',\n      template: aluno => {\n        const serie = aluno.serieAno || '____';\n        const turma = aluno.turma || '';\n        const turno = aluno.turno || '_______';\n        return `Certificamos que ${aluno.nome} frequenta regularmente as aulas no ${serie}¬∫ ano ${turma}, turno ${turno}, desta institui√ß√£o de ensino, estando em dia com suas obriga√ß√µes escolares.`;\n      },\n      adicional: `Documento v√°lido para comprova√ß√£o de frequ√™ncia escolar.`\n    }\n  };\n\n  // Fun√ß√£o para carregar a imagem e adicionar ao PDF\n  const addBackgroundToPDF = doc => {\n    return new Promise(resolve => {\n      const img = new Image();\n      img.onload = () => {\n        doc.addImage(img, 'PNG', 0, 0, doc.internal.pageSize.getWidth(), doc.internal.pageSize.getHeight());\n        resolve();\n      };\n      img.onerror = () => {\n        console.warn('Background n√£o carregado, gerando declara√ß√£o sem background');\n        resolve();\n      };\n      img.src = backgroundImage;\n    });\n  };\n  const gerarPDF = async (download = false) => {\n    const doc = new jsPDF(\"portrait\", \"pt\", \"a4\");\n    const largura = doc.internal.pageSize.getWidth();\n    const altura = doc.internal.pageSize.getHeight();\n    try {\n      // üî• ADICIONA O BACKGROUND PERSONALIZADO\n      await addBackgroundToPDF(doc);\n    } catch (error) {\n      console.warn('Erro ao carregar background:', error);\n    }\n\n    // Configura√ß√µes de fonte e cor para texto sobre o background\n    doc.setFont(\"Times\", \"Normal\");\n    doc.setFontSize(11);\n    doc.setTextColor(0, 0, 0); // Preto para melhor contraste\n\n    // Texto principal da declara√ß√£o (posicionado abaixo do cabe√ßalho do background)\n    const template = tiposDeclaracao[tipoDeclaracao].template(aluno);\n    const linhas = doc.splitTextToSize(template, largura - 100); // Margens laterais\n\n    // Posi√ß√£o Y ajustada para ficar abaixo do cabe√ßalho do background\n    let posicaoY = 280;\n\n    // Adiciona o texto principal\n    linhas.forEach(linha => {\n      doc.text(linha, 50, posicaoY);\n      posicaoY += 20;\n    });\n\n    // Texto adicional espec√≠fico do tipo de declara√ß√£o\n    posicaoY += 20;\n    const adicional = tiposDeclaracao[tipoDeclaracao].adicional;\n    const linhasAdicional = doc.splitTextToSize(adicional, largura - 100);\n    linhasAdicional.forEach(linha => {\n      doc.text(linha, 50, posicaoY);\n      posicaoY += 20;\n    });\n\n    // Data e local (posicionado acima da assinatura do background)\n    const hoje = new Date().toLocaleDateString('pt-BR');\n    doc.text(`Oiticica, Frecheirinha/CE, ${hoje}.`, 50, 650);\n    if (download) {\n      doc.save(`Declaracao_${tipoDeclaracao}_${aluno.nome.replace(/\\s+/g, '_')}.pdf`);\n      alert('‚úÖ Declara√ß√£o baixada com sucesso!');\n    } else {\n      // Criar URL para preview\n      const pdfBlob = doc.output('blob');\n      const url = URL.createObjectURL(pdfBlob);\n      setPdfUrl(url);\n      setPdfGerado(true);\n    }\n  };\n\n  // üî• COMPARTILHAMENTO DIRETO - SISTEMA ANTERIOR\n  const compartilharWhatsApp = () => {\n    if (!pdfGerado) {\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de compartilhar!');\n      return;\n    }\n    const texto = `üìÑ *Declara√ß√£o Escolar - ${tiposDeclaracao[tipoDeclaracao].nome}*\\n\\n` + `üë§ *Aluno:* ${aluno.nome}\\n` + `üìö *S√©rie/Turma:* ${aluno.serieAno}¬∫ ano ${aluno.turma}\\n` + `üè´ *Escola:* E.E.F. Nair Cunha de Aguiar\\n\\n` + `_Declara√ß√£o gerada em ${new Date().toLocaleDateString('pt-BR')}_`;\n    const url = `https://wa.me/?text=${encodeURIComponent(texto)}`;\n    window.open(url, '_blank');\n  };\n  const compartilharEmail = () => {\n    if (!pdfGerado) {\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de compartilhar!');\n      return;\n    }\n    const assunto = `üìÑ Declara√ß√£o Escolar - ${aluno.nome}`;\n    const corpo = `Prezado(a),\\n\\nSegue em anexo a declara√ß√£o escolar solicitada:\\n\\n` + `üî∏ *Tipo:* ${tiposDeclaracao[tipoDeclaracao].nome}\\n` + `üî∏ *Aluno:* ${aluno.nome}\\n` + `üî∏ *S√©rie/Turma:* ${aluno.serieAno}¬∫ ano ${aluno.turma}\\n` + `üî∏ *Data de Emiss√£o:* ${new Date().toLocaleDateString('pt-BR')}\\n\\n` + `Atenciosamente,\\nE.E.F. Nair Cunha de Aguiar\\nS√≠tio Oiticica, Frecheirinha-CE`;\n    const mailto = `mailto:?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpo)}`;\n    window.location.href = mailto;\n  };\n  const baixarPDF = () => {\n    if (!pdfGerado) {\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de baixar!');\n      return;\n    }\n    const link = document.createElement('a');\n    link.href = pdfUrl;\n    link.download = `Declaracao_${tipoDeclaracao}_${aluno.nome.replace(/\\s+/g, '_')}.pdf`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    alert('‚úÖ Declara√ß√£o baixada com sucesso!');\n  };\n  const imprimirPDF = () => {\n    if (!pdfGerado) {\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de imprimir!');\n      return;\n    }\n    const iframe = previewRef.current;\n    if (iframe && iframe.contentWindow) {\n      iframe.contentWindow.print();\n    }\n  };\n  if (!aluno) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCC4 Gerar Declara\\xE7\\xE3o com Background Oficial\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"aluno-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"\\uD83D\\uDC64 Aluno: \", aluno.nome]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDCDA S\\xE9rie/Turma: \", aluno.serieAno, \"\\xBA ano \", aluno.turma]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), aluno.dataNascimento && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83C\\uDF82 Nascimento: \", new Date(aluno.dataNascimento).toLocaleDateString('pt-BR')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tipo-selecao\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uD83D\\uDCCB Tipo de Declara\\xE7\\xE3o:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: tipoDeclaracao,\n          onChange: e => {\n            setTipoDeclaracao(e.target.value);\n            setPdfGerado(false); // Reseta o PDF quando mudar o tipo\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"vaga\",\n            children: \"\\u2705 Vaga Dispon\\xEDvel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"matricula\",\n            children: \"\\uD83D\\uDCDD Matr\\xEDcula\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"transferencia\",\n            children: \"\\uD83D\\uDD04 Transfer\\xEAncia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"frequencia\",\n            children: \"\\uD83D\\uDCCA Frequ\\xEAncia\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preview-texto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCDD Texto da Declara\\xE7\\xE3o:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"texto-preview\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"background-notice\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\uD83C\\uDFA8 Background Oficial Inclu\\xEDdo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), \"Cabe\\xE7alho completo, rodap\\xE9 com assinatura da diretora \\\"Volt\\xEDlia Maria Costa\\\" e informa\\xE7\\xF5es institucionais.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), tiposDeclaracao[tipoDeclaracao].template(aluno).split('\\n').map((linha, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n            children: linha\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"texto-adicional\",\n            children: tiposDeclaracao[tipoDeclaracao].adicional\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"background-preview\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83C\\uDFEB Visualiza\\xE7\\xE3o do Background:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"background-image\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: backgroundImage,\n            alt: \"Background Oficial da Declara\\xE7\\xE3o\",\n            style: {\n              maxWidth: '100%',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              maxHeight: '200px'\n            },\n            onError: e => {\n              e.target.style.display = 'none';\n              document.querySelector('.background-info').innerHTML = '<small>‚ö†Ô∏è Background n√£o carregado. Certifique-se de que o arquivo background.png est√° na pasta public/img/</small>';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"background-info\",\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"Modelo oficial com cabe\\xE7alho institucional e assinatura da diretora \\\"Volt\\xEDlia Maria Costa\\\"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-preview\",\n          onClick: () => gerarPDF(false),\n          disabled: pdfGerado,\n          children: pdfGerado ? '‚úÖ Declara√ß√£o Gerada' : 'üëÅÔ∏è Gerar Declara√ß√£o'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-cancel\",\n          onClick: onClose,\n          children: \"\\u274C Fechar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), pdfGerado && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"share-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDCE4 Compartilhar Declara\\xE7\\xE3o:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pdf-preview\",\n          children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n            src: pdfUrl,\n            width: \"100%\",\n            height: \"400\",\n            title: \"Preview da Declara\\xE7\\xE3o com Background\",\n            ref: previewRef,\n            style: {\n              border: '1px solid #ddd',\n              borderRadius: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preview-info\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u2705 Declara\\xE7\\xE3o Gerada com Sucesso!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 66\n            }, this), \"Agora voc\\xEA pode baixar, imprimir ou compartilhar a declara\\xE7\\xE3o.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"share-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-download\",\n            onClick: baixarPDF,\n            children: \"\\u2B07\\uFE0F Baixar PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-print\",\n            onClick: imprimirPDF,\n            children: \"\\uD83D\\uDDA8\\uFE0F Imprimir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-whatsapp\",\n            onClick: compartilharWhatsApp,\n            children: \"\\uD83D\\uDCF1 WhatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-email\",\n            onClick: compartilharEmail,\n            children: \"\\uD83D\\uDCE7 Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-regenerate\",\n            onClick: () => {\n              setPdfGerado(false);\n              setPdfUrl('');\n            },\n            children: \"\\uD83D\\uDD04 Gerar Outra\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n};\n_s(DeclaracaoModal, \"KJJU/8ZhJxS76XtNWG7NO+7kHUc=\");\n_c = DeclaracaoModal;\nexport default DeclaracaoModal;\nvar _c;\n$RefreshReg$(_c, \"DeclaracaoModal\");","map":{"version":3,"names":["React","useState","useRef","jsPDF","jsxDEV","_jsxDEV","backgroundImage","DeclaracaoModal","aluno","onClose","_s","tipoDeclaracao","setTipoDeclaracao","pdfUrl","setPdfUrl","pdfGerado","setPdfGerado","previewRef","tiposDeclaracao","vaga","nome","template","dataNasc","dataNascimento","Date","toLocaleDateString","serie","serieAno","turma","toUpperCase","adicional","matricula","parseInt","transferencia","frequencia","turno","addBackgroundToPDF","doc","Promise","resolve","img","Image","onload","addImage","internal","pageSize","getWidth","getHeight","onerror","console","warn","src","gerarPDF","download","largura","altura","error","setFont","setFontSize","setTextColor","linhas","splitTextToSize","posicaoY","forEach","linha","text","linhasAdicional","hoje","save","replace","alert","pdfBlob","output","url","URL","createObjectURL","compartilharWhatsApp","texto","encodeURIComponent","window","open","compartilharEmail","assunto","corpo","mailto","location","href","baixarPDF","link","document","createElement","body","appendChild","click","removeChild","imprimirPDF","iframe","current","contentWindow","print","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","split","map","i","alt","style","maxWidth","border","borderRadius","maxHeight","onError","display","querySelector","innerHTML","onClick","disabled","width","height","title","ref","_c","$RefreshReg$"],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/DeclaracaoModal.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport jsPDF from 'jspdf';\r\nimport './DeclaracaoModal.css';\r\n\r\n// üî• CORRE√á√ÉO: Use caminho p√∫blico\r\nconst backgroundImage = '/img/background.png';\r\n\r\nconst DeclaracaoModal = ({ aluno, onClose }) => {\r\n  const [tipoDeclaracao, setTipoDeclaracao] = useState('vaga');\r\n  const [pdfUrl, setPdfUrl] = useState('');\r\n  const [pdfGerado, setPdfGerado] = useState(false);\r\n  const previewRef = useRef(null);\r\n\r\n  const tiposDeclaracao = {\r\n    vaga: {\r\n      nome: 'Declara√ß√£o de Vaga Dispon√≠vel',\r\n      template: (aluno) => {\r\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\r\n        const serie = aluno.serieAno || '____';\r\n        const turma = aluno.turma || '';\r\n        \r\n        return `Declaramos, para os devidos fins de prova e efeitos legais, que temos vaga no ${serie}¬∫ ano ${turma}, turnos manh√£ e tarde, para o(a) aluno(a) ${aluno.nome.toUpperCase()}, nascido(a) em ${dataNasc}.`;\r\n      },\r\n      adicional: `O referido √© verdade e dou f√©.`\r\n    },\r\n    matricula: {\r\n      nome: 'Declara√ß√£o de Matr√≠cula',\r\n      template: (aluno) => {\r\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\r\n        const serie = aluno.serieAno || '____';\r\n        const turma = aluno.turma || '';\r\n        \r\n        return `Declaramos, para os devidos fins, que ${aluno.nome}, nascido(a) em ${dataNasc}, encontra-se regularmente matriculado(a) no ${serie}¬∫ ano ${turma} do Ensino Fundamental ${parseInt(serie) <= 5 ? 'I' : 'II'} desta institui√ß√£o de ensino.`;\r\n      },\r\n      adicional: `Documento v√°lido para comprova√ß√£o de matr√≠cula junto aos √≥rg√£os competentes.`\r\n    },\r\n    transferencia: {\r\n      nome: 'Declara√ß√£o de Transfer√™ncia',\r\n      template: (aluno) => {\r\n        const dataNasc = aluno.dataNascimento ? new Date(aluno.dataNascimento).toLocaleDateString('pt-BR') : '______/______/______';\r\n        const serie = aluno.serieAno || '____';\r\n        const turma = aluno.turma || '';\r\n        \r\n        return `Declaramos que ${aluno.nome}, nascido(a) em ${dataNasc}, est√° regularmente matriculado(a) no ${serie}¬∫ ano ${turma} e solicita transfer√™ncia para outra institui√ß√£o de ensino.`;\r\n      },\r\n      adicional: `Atestamos a regularidade de sua situa√ß√£o escolar para fins de transfer√™ncia.`\r\n    },\r\n    frequencia: {\r\n      nome: 'Declara√ß√£o de Frequ√™ncia',\r\n      template: (aluno) => {\r\n        const serie = aluno.serieAno || '____';\r\n        const turma = aluno.turma || '';\r\n        const turno = aluno.turno || '_______';\r\n        \r\n        return `Certificamos que ${aluno.nome} frequenta regularmente as aulas no ${serie}¬∫ ano ${turma}, turno ${turno}, desta institui√ß√£o de ensino, estando em dia com suas obriga√ß√µes escolares.`;\r\n      },\r\n      adicional: `Documento v√°lido para comprova√ß√£o de frequ√™ncia escolar.`\r\n    }\r\n  };\r\n\r\n  // Fun√ß√£o para carregar a imagem e adicionar ao PDF\r\n  const addBackgroundToPDF = (doc) => {\r\n    return new Promise((resolve) => {\r\n      const img = new Image();\r\n      img.onload = () => {\r\n        doc.addImage(img, 'PNG', 0, 0, doc.internal.pageSize.getWidth(), doc.internal.pageSize.getHeight());\r\n        resolve();\r\n      };\r\n      img.onerror = () => {\r\n        console.warn('Background n√£o carregado, gerando declara√ß√£o sem background');\r\n        resolve();\r\n      };\r\n      img.src = backgroundImage;\r\n    });\r\n  };\r\n\r\n  const gerarPDF = async (download = false) => {\r\n    const doc = new jsPDF(\"portrait\", \"pt\", \"a4\");\r\n    const largura = doc.internal.pageSize.getWidth();\r\n    const altura = doc.internal.pageSize.getHeight();\r\n\r\n    try {\r\n      // üî• ADICIONA O BACKGROUND PERSONALIZADO\r\n      await addBackgroundToPDF(doc);\r\n    } catch (error) {\r\n      console.warn('Erro ao carregar background:', error);\r\n    }\r\n\r\n    // Configura√ß√µes de fonte e cor para texto sobre o background\r\n    doc.setFont(\"Times\", \"Normal\");\r\n    doc.setFontSize(11);\r\n    doc.setTextColor(0, 0, 0); // Preto para melhor contraste\r\n\r\n    // Texto principal da declara√ß√£o (posicionado abaixo do cabe√ßalho do background)\r\n    const template = tiposDeclaracao[tipoDeclaracao].template(aluno);\r\n    const linhas = doc.splitTextToSize(template, largura - 100); // Margens laterais\r\n    \r\n    // Posi√ß√£o Y ajustada para ficar abaixo do cabe√ßalho do background\r\n    let posicaoY = 280;\r\n    \r\n    // Adiciona o texto principal\r\n    linhas.forEach(linha => {\r\n      doc.text(linha, 50, posicaoY);\r\n      posicaoY += 20;\r\n    });\r\n\r\n    // Texto adicional espec√≠fico do tipo de declara√ß√£o\r\n    posicaoY += 20;\r\n    const adicional = tiposDeclaracao[tipoDeclaracao].adicional;\r\n    const linhasAdicional = doc.splitTextToSize(adicional, largura - 100);\r\n    \r\n    linhasAdicional.forEach(linha => {\r\n      doc.text(linha, 50, posicaoY);\r\n      posicaoY += 20;\r\n    });\r\n\r\n    // Data e local (posicionado acima da assinatura do background)\r\n    const hoje = new Date().toLocaleDateString('pt-BR');\r\n    doc.text(`Oiticica, Frecheirinha/CE, ${hoje}.`, 50, 650);\r\n\r\n    if (download) {\r\n      doc.save(`Declaracao_${tipoDeclaracao}_${aluno.nome.replace(/\\s+/g, '_')}.pdf`);\r\n      alert('‚úÖ Declara√ß√£o baixada com sucesso!');\r\n    } else {\r\n      // Criar URL para preview\r\n      const pdfBlob = doc.output('blob');\r\n      const url = URL.createObjectURL(pdfBlob);\r\n      setPdfUrl(url);\r\n      setPdfGerado(true);\r\n    }\r\n  };\r\n\r\n  // üî• COMPARTILHAMENTO DIRETO - SISTEMA ANTERIOR\r\n  const compartilharWhatsApp = () => {\r\n    if (!pdfGerado) {\r\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de compartilhar!');\r\n      return;\r\n    }\r\n\r\n    const texto = `üìÑ *Declara√ß√£o Escolar - ${tiposDeclaracao[tipoDeclaracao].nome}*\\n\\n` +\r\n                 `üë§ *Aluno:* ${aluno.nome}\\n` +\r\n                 `üìö *S√©rie/Turma:* ${aluno.serieAno}¬∫ ano ${aluno.turma}\\n` +\r\n                 `üè´ *Escola:* E.E.F. Nair Cunha de Aguiar\\n\\n` +\r\n                 `_Declara√ß√£o gerada em ${new Date().toLocaleDateString('pt-BR')}_`;\r\n\r\n    const url = `https://wa.me/?text=${encodeURIComponent(texto)}`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  const compartilharEmail = () => {\r\n    if (!pdfGerado) {\r\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de compartilhar!');\r\n      return;\r\n    }\r\n\r\n    const assunto = `üìÑ Declara√ß√£o Escolar - ${aluno.nome}`;\r\n    const corpo = `Prezado(a),\\n\\nSegue em anexo a declara√ß√£o escolar solicitada:\\n\\n` +\r\n                  `üî∏ *Tipo:* ${tiposDeclaracao[tipoDeclaracao].nome}\\n` +\r\n                  `üî∏ *Aluno:* ${aluno.nome}\\n` +\r\n                  `üî∏ *S√©rie/Turma:* ${aluno.serieAno}¬∫ ano ${aluno.turma}\\n` +\r\n                  `üî∏ *Data de Emiss√£o:* ${new Date().toLocaleDateString('pt-BR')}\\n\\n` +\r\n                  `Atenciosamente,\\nE.E.F. Nair Cunha de Aguiar\\nS√≠tio Oiticica, Frecheirinha-CE`;\r\n\r\n    const mailto = `mailto:?subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpo)}`;\r\n    window.location.href = mailto;\r\n  };\r\n\r\n  const baixarPDF = () => {\r\n    if (!pdfGerado) {\r\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de baixar!');\r\n      return;\r\n    }\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = pdfUrl;\r\n    link.download = `Declaracao_${tipoDeclaracao}_${aluno.nome.replace(/\\s+/g, '_')}.pdf`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    alert('‚úÖ Declara√ß√£o baixada com sucesso!');\r\n  };\r\n\r\n  const imprimirPDF = () => {\r\n    if (!pdfGerado) {\r\n      alert('‚ö†Ô∏è Gere a declara√ß√£o primeiro antes de imprimir!');\r\n      return;\r\n    }\r\n\r\n    const iframe = previewRef.current;\r\n    if (iframe && iframe.contentWindow) {\r\n      iframe.contentWindow.print();\r\n    }\r\n  };\r\n\r\n  if (!aluno) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\">\r\n        <h2>üìÑ Gerar Declara√ß√£o com Background Oficial</h2>\r\n        \r\n        <div className=\"aluno-info\">\r\n          <h3>üë§ Aluno: {aluno.nome}</h3>\r\n          <p>üìö S√©rie/Turma: {aluno.serieAno}¬∫ ano {aluno.turma}</p>\r\n          {aluno.dataNascimento && (\r\n            <p>üéÇ Nascimento: {new Date(aluno.dataNascimento).toLocaleDateString('pt-BR')}</p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"tipo-selecao\">\r\n          <label>üìã Tipo de Declara√ß√£o:</label>\r\n          <select \r\n            value={tipoDeclaracao} \r\n            onChange={(e) => {\r\n              setTipoDeclaracao(e.target.value);\r\n              setPdfGerado(false); // Reseta o PDF quando mudar o tipo\r\n            }}\r\n          >\r\n            <option value=\"vaga\">‚úÖ Vaga Dispon√≠vel</option>\r\n            <option value=\"matricula\">üìù Matr√≠cula</option>\r\n            <option value=\"transferencia\">üîÑ Transfer√™ncia</option>\r\n            <option value=\"frequencia\">üìä Frequ√™ncia</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"preview-texto\">\r\n          <h4>üìù Texto da Declara√ß√£o:</h4>\r\n          <div className=\"texto-preview\">\r\n            <div className=\"background-notice\">\r\n              <strong>üé® Background Oficial Inclu√≠do:</strong> \r\n              Cabe√ßalho completo, rodap√© com assinatura da diretora \"Volt√≠lia Maria Costa\" e informa√ß√µes institucionais.\r\n            </div>\r\n            {tiposDeclaracao[tipoDeclaracao].template(aluno).split('\\n').map((linha, i) => (\r\n              <p key={i}>{linha}</p>\r\n            ))}\r\n            <p className=\"texto-adicional\">{tiposDeclaracao[tipoDeclaracao].adicional}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"background-preview\">\r\n          <h4>üè´ Visualiza√ß√£o do Background:</h4>\r\n          <div className=\"background-image\">\r\n            <img \r\n              src={backgroundImage} \r\n              alt=\"Background Oficial da Declara√ß√£o\" \r\n              style={{maxWidth: '100%', border: '1px solid #ddd', borderRadius: '4px', maxHeight: '200px'}}\r\n              onError={(e) => {\r\n                e.target.style.display = 'none';\r\n                document.querySelector('.background-info').innerHTML = \r\n                  '<small>‚ö†Ô∏è Background n√£o carregado. Certifique-se de que o arquivo background.png est√° na pasta public/img/</small>';\r\n              }}\r\n            />\r\n            <div className=\"background-info\">\r\n              <small>Modelo oficial com cabe√ßalho institucional e assinatura da diretora \"Volt√≠lia Maria Costa\"</small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* üî• A√á√ïES PRINCIPAIS - GERAR DECLARA√á√ÉO */}\r\n        <div className=\"modal-actions\">\r\n          <button \r\n            className=\"btn-preview\"\r\n            onClick={() => gerarPDF(false)}\r\n            disabled={pdfGerado}\r\n          >\r\n            {pdfGerado ? '‚úÖ Declara√ß√£o Gerada' : 'üëÅÔ∏è Gerar Declara√ß√£o'}\r\n          </button>\r\n          \r\n          <button className=\"btn-cancel\" onClick={onClose}>\r\n            ‚ùå Fechar\r\n          </button>\r\n        </div>\r\n\r\n        {/* üî• A√á√ïES DE COMPARTILHAMENTO - AP√ìS GERAR PDF */}\r\n        {pdfGerado && (\r\n          <div className=\"share-section\">\r\n            <h4>üì§ Compartilhar Declara√ß√£o:</h4>\r\n            \r\n            <div className=\"pdf-preview\">\r\n              <iframe \r\n                src={pdfUrl} \r\n                width=\"100%\" \r\n                height=\"400\"\r\n                title=\"Preview da Declara√ß√£o com Background\"\r\n                ref={previewRef}\r\n                style={{border: '1px solid #ddd', borderRadius: '8px'}}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"preview-info\">\r\n              <p>\r\n                <strong>‚úÖ Declara√ß√£o Gerada com Sucesso!</strong><br/>\r\n                Agora voc√™ pode baixar, imprimir ou compartilhar a declara√ß√£o.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"share-actions\">\r\n              <button \r\n                className=\"btn-download\"\r\n                onClick={baixarPDF}\r\n              >\r\n                ‚¨áÔ∏è Baixar PDF\r\n              </button>\r\n              \r\n              <button \r\n                className=\"btn-print\"\r\n                onClick={imprimirPDF}\r\n              >\r\n                üñ®Ô∏è Imprimir\r\n              </button>\r\n              \r\n              <button \r\n                className=\"btn-whatsapp\"\r\n                onClick={compartilharWhatsApp}\r\n              >\r\n                üì± WhatsApp\r\n              </button>\r\n              \r\n              <button \r\n                className=\"btn-email\"\r\n                onClick={compartilharEmail}\r\n              >\r\n                üìß Email\r\n              </button>\r\n\r\n              <button \r\n                className=\"btn-regenerate\"\r\n                onClick={() => {\r\n                  setPdfGerado(false);\r\n                  setPdfUrl('');\r\n                }}\r\n              >\r\n                üîÑ Gerar Outra\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeclaracaoModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}