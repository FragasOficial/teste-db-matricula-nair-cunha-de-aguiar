{"ast":null,"code":"import _objectSpread from\"C:/Users/Aluno LEI/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/Aluno LEI/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"totalGeral\"];import React,{useEffect,useState,useCallback,Component}from'react';import{fetchStudents,getStudent,updateStudent,deleteStudent,createStudent}from'./api';import DeclaracaoModal from'./DeclaracaoModal';// ğŸ”¥ COMPONENTES MOVIDOS PARA FORA DO COMPONENTE App\n// Componente do Dashboard de EstatÃ­sticas\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StatsDashboard=_ref=>{let{seriesStats,allStudents,dashboardLoading}=_ref;if(dashboardLoading){return/*#__PURE__*/_jsxs(\"section\",{className:\"stats-dashboard\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Distribui\\xE7\\xE3o por S\\xE9rie/Turma\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-loading\",children:\"Carregando estat\\xEDsticas...\"})]});}if(Object.keys(seriesStats).length===0||!seriesStats.totalGeral)return null;// Remover totalGeral das sÃ©ries para ordenaÃ§Ã£o\nconst{totalGeral}=seriesStats,seriesData=_objectWithoutProperties(seriesStats,_excluded);// Ordenar sÃ©ries numericamente\nconst sortedSeries=Object.keys(seriesData).sort((a,b)=>{if(a==='NÃ£o informada')return 1;if(b==='NÃ£o informada')return-1;const numA=parseInt(a)||0;const numB=parseInt(b)||0;return numA-numB;});return/*#__PURE__*/_jsxs(\"section\",{className:\"stats-dashboard\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\uD83D\\uDCCA Distribui\\xE7\\xE3o por S\\xE9rie/Turma - Total: \",totalGeral||allStudents.length,\" alunos\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[sortedSeries.map(serie=>/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-title\",children:[serie==='NÃ£o informada'?'â“':'ğŸ“š',\" \",serie,\"\\xAA S\\xE9rie\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-total\",children:[seriesData[serie].count,\" alunos\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-turmas\",children:Object.entries(seriesData[serie].turmas).sort((_ref2,_ref3)=>{let[turmaA]=_ref2;let[turmaB]=_ref3;return turmaA.localeCompare(turmaB);}).map(_ref4=>{let[turma,count]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:turma==='Sem turma'?'ğŸ« Geral':\"Turma \".concat(turma)}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:count})]},turma);})})]},serie)),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card total-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-title\",children:\"\\uD83D\\uDC65 Total Geral\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-total\",children:[totalGeral||allStudents.length,\" alunos\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-turmas\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:\"Todas as s\\xE9ries\"}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:totalGeral||allStudents.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:\"S\\xE9ries com dados\"}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:sortedSeries.length})]})]})]})]})]});};// FunÃ§Ã£o para obter Ã­cones baseados na localidade\nconst getLocalidadeIcon=localidade=>{const lowerLocalidade=localidade.toLowerCase();if(lowerLocalidade.includes('goiabeira'))return'ğŸŒ³';if(lowerLocalidade.includes('oiticica'))return'ğŸŒ¿';if(lowerLocalidade.includes('centro'))return'ğŸ¢';if(lowerLocalidade.includes('vila'))return'ğŸ˜ï¸';if(lowerLocalidade.includes('bairro'))return'ğŸ¡';if(lowerLocalidade.includes('rural'))return'ğŸšœ';if(lowerLocalidade.includes('multirÃ£o'))return'ğŸ‘¥';if(lowerLocalidade.includes('nÃ£o informada'))return'â“';return'ğŸ“';};// Componente do Dashboard de Localidades\nconst LocalidadeDashboard=_ref5=>{let{localidadeStats,seriesStats,allStudents,dashboardLoading}=_ref5;if(dashboardLoading){return/*#__PURE__*/_jsxs(\"section\",{className:\"stats-dashboard localidade-dashboard\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDFD8\\uFE0F Distribui\\xE7\\xE3o por Localidade\"}),/*#__PURE__*/_jsx(\"div\",{className:\"stats-loading\",children:\"Carregando estat\\xEDsticas por localidade...\"})]});}if(Object.keys(localidadeStats).length===0)return null;// Ordenar localidades por quantidade (maior primeiro)\nconst sortedLocalidades=Object.keys(localidadeStats).sort((a,b)=>{return localidadeStats[b].count-localidadeStats[a].count;});// Pegar as top localidades (mÃ¡ximo 8 para nÃ£o ficar muito grande)\nconst topLocalidades=sortedLocalidades.slice(0,8);return/*#__PURE__*/_jsxs(\"section\",{className:\"stats-dashboard localidade-dashboard\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDFD8\\uFE0F Distribui\\xE7\\xE3o por Localidade\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats-grid\",children:[topLocalidades.map(localidade=>/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card localidade-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-header\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"stat-title\",children:[getLocalidadeIcon(localidade),\" \",localidade]}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-total\",children:[localidadeStats[localidade].count,\" alunos\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-turmas\",children:Object.entries(localidadeStats[localidade].series).sort((_ref6,_ref7)=>{let[serieA]=_ref6;let[serieB]=_ref7;if(serieA==='NÃ£o informada')return 1;if(serieB==='NÃ£o informada')return-1;const numA=parseInt(serieA)||0;const numB=parseInt(serieB)||0;return numA-numB;}).map(_ref8=>{let[serie,count]=_ref8;return/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:serie==='NÃ£o informada'?'ğŸ“š Geral':\"\".concat(serie,\"\\xAA S\\xE9rie\")}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:count})]},serie);})})]},localidade)),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card total-card localidade-total\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-title\",children:\"\\uD83D\\uDDFA\\uFE0F Resumo Localidades\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-total\",children:[sortedLocalidades.length,\" locais\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-turmas\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:\"Total de alunos\"}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:seriesStats.totalGeral||allStudents.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:\"Localidades com dados\"}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:sortedLocalidades.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"turma-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"turma-name\",children:\"Maior localidade\"}),/*#__PURE__*/_jsx(\"span\",{className:\"turma-count\",children:sortedLocalidades[0]?\"\".concat(localidadeStats[sortedLocalidades[0]].count,\" alunos\"):'-'})]})]})]})]})]});};// Componente Modal de Boletim\nconst BoletimModal=_ref9=>{let{aluno,disciplinas,setDisciplinas,onClose,onSave}=_ref9;// ğŸ”¥ CORREÃ‡ÃƒO: FunÃ§Ã£o para calcular mÃ©dia e situaÃ§Ã£o automaticamente\nconst calcularMediaESituacao=(b1,b2,b3,b4)=>{// Converter para nÃºmeros e garantir valores vÃ¡lidos\nconst nota1=parseFloat(b1)||0;const nota2=parseFloat(b2)||0;const nota3=parseFloat(b3)||0;const nota4=parseFloat(b4)||0;const media=((nota1+nota2+nota3+nota4)/4).toFixed(1);const situacao=parseFloat(media)>=6?'Aprovado':'Em RecuperaÃ§Ã£o';return{media:parseFloat(media),situacao};};const addDisciplina=()=>{const novaDisciplina={id:Date.now().toString(),// ğŸ”¥ CORREÃ‡ÃƒO: Garantir que Ã© string\nnome:'',serie:(aluno===null||aluno===void 0?void 0:aluno.serieAno)||'',bimestre1:0,bimestre2:0,bimestre3:0,bimestre4:0,mediaFinal:0,situacao:'Em RecuperaÃ§Ã£o'};setDisciplinas([...disciplinas,novaDisciplina]);};const salvarNotas=()=>{onSave();};// ğŸ”¥ CORREÃ‡ÃƒO: FunÃ§Ã£o para atualizar notas com cÃ¡lculo automÃ¡tico\nconst atualizarNota=(index,campo,valor)=>{const novasDisciplinas=[...disciplinas];const disciplina=novasDisciplinas[index];// Converter valor para nÃºmero\nconst valorNumerico=parseFloat(valor)||0;// Limitar entre 0 e 10\nconst valorLimitado=Math.min(10,Math.max(0,valorNumerico));// Atualizar o campo especÃ­fico\ndisciplina[campo]=valorLimitado;// ğŸ”¥ CORREÃ‡ÃƒO: Calcular mÃ©dia e situaÃ§Ã£o automaticamente\nconst{media,situacao}=calcularMediaESituacao(disciplina.bimestre1,disciplina.bimestre2,disciplina.bimestre3,disciplina.bimestre4);disciplina.mediaFinal=media;disciplina.situacao=situacao;setDisciplinas(novasDisciplinas);};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",style:{maxWidth:'800px',maxHeight:'90vh',overflow:'auto'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCCA Gerar Boletim - \",aluno.nome]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\xE9rie/Turma:\"}),\" \",aluno.serieAno,\"\\xBA ano \",aluno.turma]}),/*#__PURE__*/_jsxs(\"div\",{className:\"boletim-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"boletim-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Disciplinas e Notas\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addDisciplina,style:{background:'#38a169'},children:\"+ Adicionar Disciplina\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"disciplinas-list\",children:disciplinas.map((disciplina,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"disciplina-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"disciplina-header\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome da disciplina\",value:disciplina.nome,onChange:e=>{const novasDisciplinas=[...disciplinas];novasDisciplinas[index].nome=e.target.value;setDisciplinas(novasDisciplinas);},style:{flex:1,marginRight:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const novasDisciplinas=disciplinas.filter((_,i)=>i!==index);setDisciplinas(novasDisciplinas);},style:{background:'#e53e3e'},children:\"\\u274C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notas-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"1\\xBA Bimestre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"10\",step:\"0.1\",value:disciplina.bimestre1,onChange:e=>atualizarNota(index,'bimestre1',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"2\\xBA Bimestre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"10\",step:\"0.1\",value:disciplina.bimestre2,onChange:e=>atualizarNota(index,'bimestre2',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"3\\xBA Bimestre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"10\",step:\"0.1\",value:disciplina.bimestre3,onChange:e=>atualizarNota(index,'bimestre3',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"4\\xBA Bimestre:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"10\",step:\"0.1\",value:disciplina.bimestre4,onChange:e=>atualizarNota(index,'bimestre4',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item media\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\xE9dia Final:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"media-value\",style:{color:disciplina.mediaFinal>=6?'#38a169':'#e53e3e',fontWeight:'bold'},children:disciplina.mediaFinal.toFixed(1)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nota-item situacao\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Situa\\xE7\\xE3o:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"situacao-value\",style:{color:disciplina.situacao==='Aprovado'?'#38a169':'#d69e2e',fontWeight:'bold',padding:'4px 8px',borderRadius:'4px',background:disciplina.situacao==='Aprovado'?'#f0fff4':'#fffaf0'},children:disciplina.situacao})]})]})]},disciplina.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:salvarNotas,style:{background:'#38a169'},children:\"\\uD83D\\uDCBE Salvar e Gerar Boletim\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{background:'#718096'},children:\"\\u274C Fechar\"})]})]})});};// Error Boundary Component\nclass ErrorBoundary extends Component{constructor(props){super(props);this.state={hasError:false};}static getDerivedStateFromError(error){return{hasError:true};}componentDidCatch(error,errorInfo){console.log('Erro:',error,errorInfo);}render(){if(this.state.hasError){return/*#__PURE__*/_jsx(\"h1\",{children:\"Algo deu errado.\"});}return this.props.children;}}// ğŸ”¥ COMPONENTE App PRINCIPAL CORRIGIDO\nexport default function App(){// âœ… CORRETO: Todos os hooks DENTRO do componente\nconst[showDeclaracaoModal,setShowDeclaracaoModal]=useState(false);const[showBoletimModal,setShowBoletimModal]=useState(false);const[students,setStudents]=useState([]);const[allStudents,setAllStudents]=useState([]);const[q,setQ]=useState('');const[page,setPage]=useState(1);const[limit]=useState(50);const[loading,setLoading]=useState(false);const[selected,setSelected]=useState(null);const[editing,setEditing]=useState(false);const[creating,setCreating]=useState(false);const[total,setTotal]=useState(0);const[totalPages,setTotalPages]=useState(0);const[seriesStats,setSeriesStats]=useState({});const[localidadeStats,setLocalidadeStats]=useState({});const[dashboardLoading,setDashboardLoading]=useState(false);const[documentType,setDocumentType]=useState('');const[showDataPanel,setShowDataPanel]=useState(true);const[disciplinas,setDisciplinas]=useState([]);// Estados para controlar visibilidade dos dashboards\nconst[showSeriesDashboard,setShowSeriesDashboard]=useState(false);const[showLocalidadeDashboard,setShowLocalidadeDashboard]=useState(false);// ğŸ”¥ DEBUG EXTREMO: Verifique TODOS os campos antes do envio\nuseEffect(()=>{if(selected&&(editing||creating)){console.log('ğŸ”ğŸ”ğŸ” DEBUG EXTREMO - Todos os campos do aluno:');Object.keys(selected).forEach(key=>{console.log(\"- \\\"\".concat(key,\"\\\":\"),selected[key]);});}},[selected,editing,creating]);// ğŸ”¥ FUNÃ‡ÃƒO PARA TOGGLE DO PAINEL DE DADOS\nconst toggleDataPanel=()=>{setShowDataPanel(!showDataPanel);};// ğŸ”¥ FUNÃ‡ÃƒO PARA ABRIR MODAL DE BOLETIM\nconst openBoletimModal=()=>{if(!selected){alert('Selecione um aluno primeiro');return;}// ğŸ”¥ CORREÃ‡ÃƒO: Carregar disciplinas existentes ou inicializar vazio\nif(selected.notas&&Array.isArray(selected.notas)){setDisciplinas(selected.notas.map(nota=>_objectSpread(_objectSpread({},nota),{},{id:nota.id||Date.now().toString()// ğŸ”¥ CORREÃ‡ÃƒO: Garantir ID como string\n})));}else{setDisciplinas([]);}setShowBoletimModal(true);};// ğŸ”¥ CORREÃ‡ÃƒO: Aluno vazio para criaÃ§Ã£o com TODOS os campos\nconst emptyStudent={nome:'',dataNascimento:'',cpf:'',cartaoSUS:'',serieAno:'',turma:'',turno:'',status:'Matriculado',transporte:'',localidade:'',nomeMae:'',nomePai:''};// Carregar TODOS os alunos para o dashboard\nconst loadAllStudents=async()=>{setDashboardLoading(true);try{const resp=await fetchStudents({page:1,limit:1000,q:''});setAllStudents(resp.data||[]);}catch(error){console.error('Erro ao carregar dados do dashboard:',error);}finally{setDashboardLoading(false);}};// Carregar alunos com busca inteligente\nasync function load(){let searchTerm=arguments.length>0&&arguments[0]!==undefined?arguments[0]:q;setLoading(true);try{const resp=await fetchStudents({page,limit,q:searchTerm});setStudents(resp.data||[]);setTotal(resp.total||0);setTotalPages(resp.totalPages||0);}catch(error){console.error('Erro ao carregar alunos:',error);alert('Erro ao carregar dados');}finally{setLoading(false);}}// Calcular estatÃ­sticas com TODOS os alunos\nuseEffect(()=>{if(allStudents.length>0){const statsSeries={};const statsLocalidades={};let totalGeral=0;allStudents.forEach(student=>{var _student$serieAno,_student$turma,_student$localidade;const serie=((_student$serieAno=student.serieAno)===null||_student$serieAno===void 0?void 0:_student$serieAno.toString().trim())||'NÃ£o informada';const turma=((_student$turma=student.turma)===null||_student$turma===void 0?void 0:_student$turma.toString().trim())||'Sem turma';const localidade=((_student$localidade=student.localidade)===null||_student$localidade===void 0?void 0:_student$localidade.toString().trim())||'NÃ£o informada';totalGeral++;// EstatÃ­stica por sÃ©rie\nif(!statsSeries[serie]){statsSeries[serie]={count:0,turmas:{}};}statsSeries[serie].count++;if(!statsSeries[serie].turmas[turma]){statsSeries[serie].turmas[turma]=0;}statsSeries[serie].turmas[turma]++;// EstatÃ­stica por localidade\nif(!statsLocalidades[localidade]){statsLocalidades[localidade]={count:0,series:{}};}statsLocalidades[localidade].count++;// EstatÃ­stica por sÃ©rie dentro da localidade\nif(!statsLocalidades[localidade].series[serie]){statsLocalidades[localidade].series[serie]=0;}statsLocalidades[localidade].series[serie]++;});statsSeries.totalGeral=totalGeral;setSeriesStats(statsSeries);setLocalidadeStats(statsLocalidades);}else{setSeriesStats({});setLocalidadeStats({});}},[allStudents]);// Carregar dados do dashboard na inicializaÃ§Ã£o\nuseEffect(()=>{loadAllStudents();load();},[]);// Debounce para pesquisa\nconst debouncedSearch=useCallback(searchTerm=>{const timer=setTimeout(()=>{setPage(1);load(searchTerm);},500);return()=>clearTimeout(timer);},[]);useEffect(()=>{if(q!==''){debouncedSearch(q);}else{setPage(1);load();}},[q,debouncedSearch]);// Recarregar quando mudar pÃ¡gina\nuseEffect(()=>{if(q===''){load();}},[page]);// Recarregar dashboard apÃ³s criar/editar/excluir\nconst handleStudentChange=()=>{loadAllStudents();load();};// Busca manual\nfunction handleSearch(){setPage(1);load();}// Abrir detalhes do aluno\nasync function openDetail(id){try{console.log('ğŸ” Buscando aluno ID:',id);const s=await getStudent(id);console.log('âœ… Aluno carregado:',s);setSelected(s);setEditing(false);setCreating(false);setDocumentType('');// Resetar tipo de documento\n}catch(error){console.error('âŒ Erro ao carregar detalhes:',error);alert('Erro ao carregar detalhes do aluno: '+error.message);}}// ğŸ”¥ CORREÃ‡ÃƒO COMPLETA: FunÃ§Ã£o para limpar dados antes do envio\nconst cleanStudentData=student=>{const cleaned=_objectSpread({},student);console.log('ğŸ§¹ Dados antes da limpeza:',cleaned);// Lista de campos problemÃ¡ticos para remover\nconst camposProblematicos=['Data de Masc.','Data de Masc','Data de Nasc.','Data de Nasc','Data de ','',' ',undefined,null];// Remover campos problemÃ¡ticos\nObject.keys(cleaned).forEach(key=>{// Remover campos com nomes vazios, invÃ¡lidos ou problemÃ¡ticos\nif(!key||key.trim()===''||camposProblematicos.includes(key)||key.includes('Data de Masc')||key.includes('Data de Nasc')){console.log(\"\\uD83D\\uDDD1\\uFE0F Removendo campo problem\\xE1tico: \\\"\".concat(key,\"\\\"\"));delete cleaned[key];}// Remover campos com valores undefined ou null\nif(cleaned[key]===undefined||cleaned[key]===null){delete cleaned[key];}// Converter campos string vazios para undefined (serÃ£o removidos)\nif(typeof cleaned[key]==='string'&&cleaned[key].trim()===''){cleaned[key]=undefined;}});// ğŸ”¥ CORREÃ‡ÃƒO EXTRA: Remover qualquer campo que comece com \"Data de\"\nObject.keys(cleaned).forEach(key=>{if(key.startsWith('Data de')){console.log(\"\\uD83D\\uDDD1\\uFE0F Removendo campo que come\\xE7a com \\\"Data de\\\": \\\"\".concat(key,\"\\\"\"));delete cleaned[key];}});// ğŸ”¥ GARANTIR que campos obrigatÃ³rios tenham nomes corretos\nif(cleaned.dataNascimento===undefined&&cleaned['Data de Nascimento']){cleaned.dataNascimento=cleaned['Data de Nascimento'];delete cleaned['Data de Nascimento'];}// Remover qualquer campo undefined restante\nObject.keys(cleaned).forEach(key=>{if(cleaned[key]===undefined){delete cleaned[key];}});console.log('âœ… Dados apÃ³s limpeza:',cleaned);return cleaned;};// Salvar ediÃ§Ã£o\nasync function save(){if(!selected||!selected._id){alert('Nenhum aluno selecionado para salvar');return;}try{console.log('ğŸ’¾ Salvando aluno (ORIGINAL):',selected);// ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\nconst cleanedData=cleanStudentData(selected);console.log('ğŸ§¹ Dados limpos para envio:',cleanedData);// ğŸ”¥ VERIFICAÃ‡ÃƒO EXTRA: Log dos campos que serÃ£o enviados\nconsole.log('ğŸ“¤ Campos que serÃ£o enviados:',Object.keys(cleanedData));const res=await updateStudent(selected._id,cleanedData);setSelected(res);setEditing(false);handleStudentChange();alert('Aluno atualizado com sucesso!');}catch(error){console.error('âŒ Erro ao salvar:',error);// ğŸ”¥ CORREÃ‡ÃƒO: Declarar cleanedData dentro do catch tambÃ©m\nlet cleanedData;try{cleanedData=cleanStudentData(selected);}catch(cleanError){console.error('âŒ Erro ao limpar dados:',cleanError);cleanedData=_objectSpread({},selected);// Fallback\n}// ğŸ”¥ DEBUG DETALHADO\nconsole.log('ğŸ” DEBUG - Dados que tentaram ser enviados:');console.log('- selected:',selected);console.log('- cleanedData:',cleanedData);alert('Erro ao salvar alteraÃ§Ãµes: '+error.message);}}// Excluir aluno\nasync function remove(id){if(!id){alert('ID do aluno nÃ£o encontrado');return;}if(!window.confirm('Tem certeza que deseja excluir este aluno?'))return;try{console.log('ğŸ—‘ï¸ Excluindo aluno ID:',id);await deleteStudent(id);setSelected(null);handleStudentChange();alert('Aluno excluÃ­do com sucesso!');}catch(error){console.error('âŒ Erro ao excluir:',error);alert('Erro ao excluir aluno: '+error.message);}}// Criar novo aluno\nasync function createNewStudent(){if(!selected){alert('Preencha os dados do aluno');return;}// ValidaÃ§Ã£o bÃ¡sica no frontend\nif(!selected.nome||!selected.nome.trim()){alert('Nome Ã© obrigatÃ³rio');return;}try{console.log('â• Criando novo aluno:',selected);// ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\nconst cleanedData=cleanStudentData(selected);console.log('ğŸ§¹ Dados limpos para criaÃ§Ã£o:',cleanedData);const createdStudent=await createStudent(cleanedData);alert('Aluno criado com sucesso!');setCreating(false);setSelected(null);handleStudentChange();}catch(error){console.error('âŒ Erro ao criar aluno:',error);// Mensagem de erro mais amigÃ¡vel\nlet errorMessage='Erro ao criar aluno';if(error.message.includes('400')){errorMessage='Dados invÃ¡lidos. Verifique os campos obrigatÃ³rios.';}else if(error.message.includes('CPF jÃ¡ cadastrado')){errorMessage='CPF jÃ¡ estÃ¡ cadastrado no sistema.';}else if(error.message.includes('NetworkError')){errorMessage='Erro de conexÃ£o. Verifique se o servidor estÃ¡ rodando.';}else{errorMessage=error.message||'Erro desconhecido ao criar aluno';}alert(errorMessage);}}// Iniciar criaÃ§Ã£o\nfunction startCreate(){setSelected(_objectSpread({},emptyStudent));setCreating(true);setEditing(false);setDocumentType('');}// Cancelar criaÃ§Ã£o\nfunction cancelCreate(){setCreating(false);setSelected(null);setDocumentType('');}// Gerar documentos\nfunction generateDocument(type){if(!selected){alert('Selecione um aluno primeiro');return;}setDocumentType(type);// Simular geraÃ§Ã£o de documento\nconst docContent={declaraÃ§Ã£o:\"Declara\\xE7\\xE3o para \".concat(selected.nome),boletim:\"Boletim de \".concat(selected.nome,\" - \").concat(selected.serieAno,\"\\xAA S\\xE9rie \").concat(selected.turma),historico:\"Hist\\xF3rico Escolar de \".concat(selected.nome)};const content=docContent[type];// Criar e baixar documento\nconst element=document.createElement('a');const file=new Blob([content],{type:'text/plain'});element.href=URL.createObjectURL(file);element.download=\"\".concat(type,\"_\").concat(selected.nome,\".txt\");document.body.appendChild(element);element.click();document.body.removeChild(element);alert(\"\".concat(type.charAt(0).toUpperCase()+type.slice(1),\" gerado com sucesso!\"));}// ğŸ”¥ CORREÃ‡ÃƒO COMPLETA: FunÃ§Ã£o para salvar notas\nasync function salvarNotas(){if(!selected)return;try{// ğŸ”¥ CORREÃ‡ÃƒO: Garantir que todas as disciplinas tenham IDs vÃ¡lidos e formato correto\nconst disciplinasFormatadas=disciplinas.map(disciplina=>({id:disciplina.id||\"disciplina_\".concat(Date.now(),\"_\").concat(Math.random().toString(36).substr(2,9)),nome:disciplina.nome||'Disciplina nÃ£o nomeada',serie:disciplina.serie||(selected===null||selected===void 0?void 0:selected.serieAno)||'',// ğŸ”¥ CORREÃ‡ÃƒO: Garantir que todos os campos numÃ©ricos sejam numbers\nbimestre1:parseFloat(disciplina.bimestre1)||0,bimestre2:parseFloat(disciplina.bimestre2)||0,bimestre3:parseFloat(disciplina.bimestre3)||0,bimestre4:parseFloat(disciplina.bimestre4)||0,mediaFinal:parseFloat(disciplina.mediaFinal)||0,situacao:disciplina.situacao||'Em RecuperaÃ§Ã£o'}));const alunoAtualizado=_objectSpread(_objectSpread({},selected),{},{notas:disciplinasFormatadas});// ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\nconst cleanedData=cleanStudentData(alunoAtualizado);console.log('ğŸ“Š Salvando notas:',cleanedData);await updateStudent(selected._id,cleanedData);setSelected(alunoAtualizado);setShowBoletimModal(false);alert('Notas salvas com sucesso!');// Recarregar dados\nhandleStudentChange();}catch(error){console.error('âŒ Erro ao salvar notas:',error);alert('Erro ao salvar notas: '+error.message);}}// Pesquisas rÃ¡pidas por sÃ©rie/turma\nfunction quickSearch(term){setQ(term);setPage(1);}return/*#__PURE__*/_jsx(ErrorBoundary,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"GEA (Gerenciamento Educacional e Administrativo)\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"E. E. F. NAIR CUNHA DE AGUIAR\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Buscar por: nome, CPF, s\\xE9rie, turma, localidade...\",value:q,onChange:e=>setQ(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSearch()}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Buscar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startCreate,style:{background:'#38a169',marginLeft:'8px'},children:\"+ Novo Aluno\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleDataPanel,style:{background:showDataPanel?'#ed8936':'#4299e1',marginLeft:'8px'},children:showDataPanel?'ğŸ“‹ Ocultar Dados':'ğŸ“‹ Mostrar Dados'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSeriesDashboard(!showSeriesDashboard),style:{background:showSeriesDashboard?'#ed8936':'#4299e1',marginLeft:'8px'},children:showSeriesDashboard?'ğŸ“Š Ocultar SÃ©ries':'ğŸ“Š Ver SÃ©ries'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLocalidadeDashboard(!showLocalidadeDashboard),style:{background:showLocalidadeDashboard?'#ed8936':'#48bb78',marginLeft:'8px'},children:showLocalidadeDashboard?'ğŸ˜ï¸ Ocultar Localidades':'ğŸ˜ï¸ Ver Localidades'}),q&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setQ('');setPage(1);},style:{marginLeft:'8px',background:'#718096'},children:\"Limpar\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"quick-search\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"\\uD83D\\uDD0D \",/*#__PURE__*/_jsx(\"strong\",{children:\"Pesquisas r\\xE1pidas:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>quickSearch('8 A'),className:\"quick-btn\",children:\"8\\xB0 A\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>quickSearch('8 B'),className:\"quick-btn\",children:\"8\\xB0 B\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>quickSearch('8'),className:\"quick-btn\",children:\"8\\xB0 Ano\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>quickSearch('9 U'),className:\"quick-btn\",children:\"9\\xB0 U\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>quickSearch('2 U'),className:\"quick-btn\",children:\"2\\xB0 U\"})]})}),!q&&/*#__PURE__*/_jsx(\"div\",{className:\"search-tips\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Dicas:\"}),\"\\\"2\\\" (s\\xE9rie) \\u2022 \\\"A\\\" (turma) \\u2022 \\\"09565384366\\\" (CPF) \\u2022 \\\"Goiabeira\\\" (localidade) \\u2022 \\\"Ana\\\" (nome) \\u2022 \\\"8 A\\\" (s\\xE9rie e turma)\"]})})]}),showSeriesDashboard&&/*#__PURE__*/_jsx(StatsDashboard,{seriesStats:seriesStats,allStudents:allStudents,dashboardLoading:dashboardLoading}),showLocalidadeDashboard&&/*#__PURE__*/_jsx(LocalidadeDashboard,{localidadeStats:localidadeStats,seriesStats:seriesStats,allStudents:allStudents,dashboardLoading:dashboardLoading}),showDataPanel&&/*#__PURE__*/_jsx(\"section\",{className:\"detail-panel\",children:selected?/*#__PURE__*/_jsxs(\"div\",{className:\"detail-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:creating?'Novo Aluno':editing?'Editando Aluno':'Detalhes do Aluno'}),editing||creating?/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Nome:\",/*#__PURE__*/_jsx(\"input\",{value:selected.nome||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{nome:e.target.value})),placeholder:\"Nome completo do aluno\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Data de Nascimento:\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"dataNascimento\"// ğŸ”¥ ADICIONE ESTE name\n,value:selected.dataNascimento?new Date(selected.dataNascimento).toISOString().split('T')[0]:'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{dataNascimento:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"CPF:\",/*#__PURE__*/_jsx(\"input\",{value:selected.cpf||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{cpf:e.target.value})),placeholder:\"000.000.000-00\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Nome da M\\xE3e:\",/*#__PURE__*/_jsx(\"input\",{value:selected.nomeMae||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{nomeMae:e.target.value})),placeholder:\"Nome completo da m\\xE3e\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Nome do Pai:\",/*#__PURE__*/_jsx(\"input\",{value:selected.nomePai||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{nomePai:e.target.value})),placeholder:\"Nome completo do pai\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Status:\",/*#__PURE__*/_jsxs(\"select\",{value:selected.status||'Matriculado',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Matriculado\",children:\"Matriculado\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Transferido\",children:\"Transferido\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Conclu\\xEDdo\",children:\"Conclu\\xEDdo\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"S\\xE9rie/Ano:\",/*#__PURE__*/_jsx(\"input\",{value:selected.serieAno||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{serieAno:e.target.value})),placeholder:\"Ex: 8\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Turma:\",/*#__PURE__*/_jsx(\"input\",{value:selected.turma||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{turma:e.target.value})),placeholder:\"Ex: A\"})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Localidade:\",/*#__PURE__*/_jsx(\"input\",{value:selected.localidade||'',onChange:e=>setSelected(_objectSpread(_objectSpread({},selected),{},{localidade:e.target.value})),placeholder:\"Ex: Goiabeira\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"actions\",children:creating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:createNewStudent,children:\"Criar Aluno\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelCreate,children:\"Cancelar\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:save,children:\"Salvar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(false),children:\"Cancelar\"})]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"read\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nome:\"}),\" \",selected.nome]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Data Nasc.:\"}),\" \",selected.dataNascimento?new Date(selected.dataNascimento).toLocaleDateString('pt-BR'):'']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"CPF:\"}),\" \",selected.cpf]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nome da M\\xE3e:\"}),\" \",selected.nomeMae||'NÃ£o informado']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Nome do Pai:\"}),\" \",selected.nomePai||'NÃ£o informado']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",selected.status||'Matriculado']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"S\\xE9rie/Ano:\"}),\" \",selected.serieAno]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Turma:\"}),\" \",selected.turma]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Localidade:\"}),\" \",selected.localidade]}),/*#__PURE__*/_jsxs(\"div\",{className:\"document-actions\",style:{margin:'15px 0',padding:'10px',background:'#f7fafc',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCC4 Gerar Documentos:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeclaracaoModal(true),style:{background:'#4299e1'},children:\"\\uD83D\\uDCDD Declara\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"button\",{onClick:openBoletimModal,style:{background:'#48bb78'},children:\"\\uD83D\\uDCCA Boletim\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>generateDocument('historico'),style:{background:'#ed8936'},children:\"\\uD83D\\uDCDA Hist\\xF3rico\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditing(true),children:\"\\u270F\\uFE0F Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>remove(selected._id),style:{background:'#e53e3e'},children:\"\\uD83D\\uDDD1\\uFE0F Excluir\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelected(null),children:\"\\u274C Fechar\"})]})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-detail\",children:creating?'Preencha os dados do novo aluno':'Selecione um aluno para ver os detalhes'})}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"list\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meta\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Total na busca: \",total]}),q&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Filtro: \\\"\",q,\"\\\"\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"P\\xE1gina \",page,\" de \",totalPages,\" \\u2014\",/*#__PURE__*/_jsx(\"button\",{disabled:page<=1,onClick:()=>setPage(p=>Math.max(1,p-1)),children:\"\\u25C0\"}),/*#__PURE__*/_jsx(\"button\",{disabled:page>=totalPages,onClick:()=>setPage(p=>p+1),children:\"\\u25B6\"})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{children:\"Carregando...\"}):students.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center',color:'#718096'},children:q?\"Nenhum aluno encontrado para \\\"\".concat(q,\"\\\"\"):'Nenhum aluno cadastrado'}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Data Nasc.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CPF\"}),/*#__PURE__*/_jsx(\"th\",{children:\"S\\xE9rie\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Turma\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Localidade\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:students.map(s=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:s.nome}),/*#__PURE__*/_jsx(\"td\",{children:s.dataNascimento?new Date(s.dataNascimento).toLocaleDateString('pt-BR'):''}),/*#__PURE__*/_jsx(\"td\",{children:s.cpf}),/*#__PURE__*/_jsx(\"td\",{children:s.serieAno}),/*#__PURE__*/_jsx(\"td\",{children:s.turma}),/*#__PURE__*/_jsx(\"td\",{children:s.localidade}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>openDetail(s._id),children:\"Abrir\"})})]},s._id||s.cpf))})]})]})}),showDeclaracaoModal&&/*#__PURE__*/_jsx(DeclaracaoModal,{aluno:selected,onClose:()=>setShowDeclaracaoModal(false)}),showBoletimModal&&/*#__PURE__*/_jsx(BoletimModal,{aluno:selected,disciplinas:disciplinas,setDisciplinas:setDisciplinas,onClose:()=>setShowBoletimModal(false),onSave:salvarNotas}),/*#__PURE__*/_jsx(\"footer\",{children:/*#__PURE__*/_jsx(\"small\",{children:\"API: http://localhost:4000/api/students\"})})]})});}","map":{"version":3,"names":["React","useEffect","useState","useCallback","Component","fetchStudents","getStudent","updateStudent","deleteStudent","createStudent","DeclaracaoModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StatsDashboard","_ref","seriesStats","allStudents","dashboardLoading","className","children","Object","keys","length","totalGeral","seriesData","_objectWithoutProperties","_excluded","sortedSeries","sort","a","b","numA","parseInt","numB","map","serie","count","entries","turmas","_ref2","_ref3","turmaA","turmaB","localeCompare","_ref4","turma","concat","getLocalidadeIcon","localidade","lowerLocalidade","toLowerCase","includes","LocalidadeDashboard","_ref5","localidadeStats","sortedLocalidades","topLocalidades","slice","series","_ref6","_ref7","serieA","serieB","_ref8","BoletimModal","_ref9","aluno","disciplinas","setDisciplinas","onClose","onSave","calcularMediaESituacao","b1","b2","b3","b4","nota1","parseFloat","nota2","nota3","nota4","media","toFixed","situacao","addDisciplina","novaDisciplina","id","Date","now","toString","nome","serieAno","bimestre1","bimestre2","bimestre3","bimestre4","mediaFinal","salvarNotas","atualizarNota","index","campo","valor","novasDisciplinas","disciplina","valorNumerico","valorLimitado","Math","min","max","style","maxWidth","maxHeight","overflow","onClick","background","type","placeholder","value","onChange","e","target","flex","marginRight","filter","_","i","step","color","fontWeight","padding","borderRadius","marginTop","ErrorBoundary","constructor","props","state","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","console","log","render","App","showDeclaracaoModal","setShowDeclaracaoModal","showBoletimModal","setShowBoletimModal","students","setStudents","setAllStudents","q","setQ","page","setPage","limit","loading","setLoading","selected","setSelected","editing","setEditing","creating","setCreating","total","setTotal","totalPages","setTotalPages","setSeriesStats","setLocalidadeStats","setDashboardLoading","documentType","setDocumentType","showDataPanel","setShowDataPanel","showSeriesDashboard","setShowSeriesDashboard","showLocalidadeDashboard","setShowLocalidadeDashboard","forEach","key","toggleDataPanel","openBoletimModal","alert","notas","Array","isArray","nota","_objectSpread","emptyStudent","dataNascimento","cpf","cartaoSUS","turno","status","transporte","nomeMae","nomePai","loadAllStudents","resp","data","load","searchTerm","arguments","undefined","statsSeries","statsLocalidades","student","_student$serieAno","_student$turma","_student$localidade","trim","debouncedSearch","timer","setTimeout","clearTimeout","handleStudentChange","handleSearch","openDetail","s","message","cleanStudentData","cleaned","camposProblematicos","startsWith","save","_id","cleanedData","res","cleanError","remove","window","confirm","createNewStudent","createdStudent","errorMessage","startCreate","cancelCreate","generateDocument","docContent","declaraÃ§Ã£o","boletim","historico","content","element","document","createElement","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","removeChild","charAt","toUpperCase","disciplinasFormatadas","random","substr","alunoAtualizado","quickSearch","term","onKeyPress","marginLeft","name","toISOString","split","toLocaleDateString","margin","display","gap","flexWrap","disabled","p","textAlign"],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback, Component } from 'react';\r\nimport { fetchStudents, getStudent, updateStudent, deleteStudent, createStudent } from './api';\r\nimport DeclaracaoModal from './DeclaracaoModal';\r\n\r\n// ğŸ”¥ COMPONENTES MOVIDOS PARA FORA DO COMPONENTE App\r\n\r\n// Componente do Dashboard de EstatÃ­sticas\r\nconst StatsDashboard = ({ seriesStats, allStudents, dashboardLoading }) => {\r\n  if (dashboardLoading) {\r\n    return (\r\n      <section className=\"stats-dashboard\">\r\n        <h3>ğŸ“Š DistribuiÃ§Ã£o por SÃ©rie/Turma</h3>\r\n        <div className=\"stats-loading\">Carregando estatÃ­sticas...</div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (Object.keys(seriesStats).length === 0 || !seriesStats.totalGeral) return null;\r\n  \r\n  // Remover totalGeral das sÃ©ries para ordenaÃ§Ã£o\r\n  const { totalGeral, ...seriesData } = seriesStats;\r\n\r\n  // Ordenar sÃ©ries numericamente\r\n  const sortedSeries = Object.keys(seriesData).sort((a, b) => {\r\n    if (a === 'NÃ£o informada') return 1;\r\n    if (b === 'NÃ£o informada') return -1;\r\n    const numA = parseInt(a) || 0;\r\n    const numB = parseInt(b) || 0;\r\n    return numA - numB;\r\n  });\r\n\r\n  return (\r\n    <section className=\"stats-dashboard\">\r\n      <h3>ğŸ“Š DistribuiÃ§Ã£o por SÃ©rie/Turma - Total: {totalGeral || allStudents.length} alunos</h3>\r\n      <div className=\"stats-grid\">\r\n        {sortedSeries.map(serie => (\r\n          <div key={serie} className=\"stat-card\">\r\n            <div className=\"stat-header\">\r\n              <span className=\"stat-title\">\r\n                {serie === 'NÃ£o informada' ? 'â“' : 'ğŸ“š'} {serie}Âª SÃ©rie\r\n              </span>\r\n              <span className=\"stat-total\">{seriesData[serie].count} alunos</span>\r\n            </div>\r\n            \r\n            <div className=\"stat-turmas\">\r\n              {Object.entries(seriesData[serie].turmas)\r\n                .sort(([turmaA], [turmaB]) => turmaA.localeCompare(turmaB))\r\n                .map(([turma, count]) => (\r\n                <div key={turma} className=\"turma-item\">\r\n                  <span className=\"turma-name\">\r\n                    {turma === 'Sem turma' ? 'ğŸ« Geral' : `Turma ${turma}`}\r\n                  </span>\r\n                  <span className=\"turma-count\">{count}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Card de total geral */}\r\n        <div className=\"stat-card total-card\">\r\n          <div className=\"stat-header\">\r\n            <span className=\"stat-title\">ğŸ‘¥ Total Geral</span>\r\n            <span className=\"stat-total\">{totalGeral || allStudents.length} alunos</span>\r\n          </div>\r\n          <div className=\"stat-turmas\">\r\n            <div className=\"turma-item\">\r\n              <span className=\"turma-name\">Todas as sÃ©ries</span>\r\n              <span className=\"turma-count\">{totalGeral || allStudents.length}</span>\r\n            </div>\r\n            <div className=\"turma-item\">\r\n              <span className=\"turma-name\">SÃ©ries com dados</span>\r\n              <span className=\"turma-count\">{sortedSeries.length}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\n// FunÃ§Ã£o para obter Ã­cones baseados na localidade\r\nconst getLocalidadeIcon = (localidade) => {\r\n  const lowerLocalidade = localidade.toLowerCase();\r\n  \r\n  if (lowerLocalidade.includes('goiabeira')) return 'ğŸŒ³';\r\n  if (lowerLocalidade.includes('oiticica')) return 'ğŸŒ¿';\r\n  if (lowerLocalidade.includes('centro')) return 'ğŸ¢';\r\n  if (lowerLocalidade.includes('vila')) return 'ğŸ˜ï¸';\r\n  if (lowerLocalidade.includes('bairro')) return 'ğŸ¡';\r\n  if (lowerLocalidade.includes('rural')) return 'ğŸšœ';\r\n  if (lowerLocalidade.includes('multirÃ£o')) return 'ğŸ‘¥';\r\n  if (lowerLocalidade.includes('nÃ£o informada')) return 'â“';\r\n  \r\n  return 'ğŸ“';\r\n};\r\n\r\n// Componente do Dashboard de Localidades\r\nconst LocalidadeDashboard = ({ localidadeStats, seriesStats, allStudents, dashboardLoading }) => {\r\n  if (dashboardLoading) {\r\n    return (\r\n      <section className=\"stats-dashboard localidade-dashboard\">\r\n        <h3>ğŸ˜ï¸ DistribuiÃ§Ã£o por Localidade</h3>\r\n        <div className=\"stats-loading\">Carregando estatÃ­sticas por localidade...</div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (Object.keys(localidadeStats).length === 0) return null;\r\n    \r\n  // Ordenar localidades por quantidade (maior primeiro)\r\n  const sortedLocalidades = Object.keys(localidadeStats).sort((a, b) => {\r\n    return localidadeStats[b].count - localidadeStats[a].count;\r\n  });\r\n\r\n  // Pegar as top localidades (mÃ¡ximo 8 para nÃ£o ficar muito grande)\r\n  const topLocalidades = sortedLocalidades.slice(0, 8);\r\n\r\n  return (\r\n    <section className=\"stats-dashboard localidade-dashboard\">\r\n      <h3>ğŸ˜ï¸ DistribuiÃ§Ã£o por Localidade</h3>\r\n      <div className=\"stats-grid\">\r\n        {topLocalidades.map(localidade => (\r\n          <div key={localidade} className=\"stat-card localidade-card\">\r\n            <div className=\"stat-header\">\r\n              <span className=\"stat-title\">\r\n                {getLocalidadeIcon(localidade)} {localidade}\r\n              </span>\r\n              <span className=\"stat-total\">{localidadeStats[localidade].count} alunos</span>\r\n            </div>\r\n            \r\n            <div className=\"stat-turmas\">\r\n              {Object.entries(localidadeStats[localidade].series)\r\n                .sort(([serieA], [serieB]) => {\r\n                  if (serieA === 'NÃ£o informada') return 1;\r\n                  if (serieB === 'NÃ£o informada') return -1;\r\n                  const numA = parseInt(serieA) || 0;\r\n                  const numB = parseInt(serieB) || 0;\r\n                  return numA - numB;\r\n                })\r\n                .map(([serie, count]) => (\r\n                <div key={serie} className=\"turma-item\">\r\n                  <span className=\"turma-name\">\r\n                    {serie === 'NÃ£o informada' ? 'ğŸ“š Geral' : `${serie}Âª SÃ©rie`}\r\n                  </span>\r\n                  <span className=\"turma-count\">{count}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n        \r\n        {/* Card de resumo das localidades */}\r\n        <div className=\"stat-card total-card localidade-total\">\r\n          <div className=\"stat-header\">\r\n            <span className=\"stat-title\">ğŸ—ºï¸ Resumo Localidades</span>\r\n            <span className=\"stat-total\">{sortedLocalidades.length} locais</span>\r\n          </div>\r\n          <div className=\"stat-turmas\">\r\n            <div className=\"turma-item\">\r\n              <span className=\"turma-name\">Total de alunos</span>\r\n              <span className=\"turma-count\">{seriesStats.totalGeral || allStudents.length}</span>\r\n            </div>\r\n            <div className=\"turma-item\">\r\n              <span className=\"turma-name\">Localidades com dados</span>\r\n              <span className=\"turma-count\">{sortedLocalidades.length}</span>\r\n            </div>\r\n            <div className=\"turma-item\">\r\n              <span className=\"turma-name\">Maior localidade</span>\r\n              <span className=\"turma-count\">\r\n                {sortedLocalidades[0] ? `${localidadeStats[sortedLocalidades[0]].count} alunos` : '-'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\n// Componente Modal de Boletim\r\nconst BoletimModal = ({ aluno, disciplinas, setDisciplinas, onClose, onSave }) => {\r\n  // ğŸ”¥ CORREÃ‡ÃƒO: FunÃ§Ã£o para calcular mÃ©dia e situaÃ§Ã£o automaticamente\r\n  const calcularMediaESituacao = (b1, b2, b3, b4) => {\r\n    // Converter para nÃºmeros e garantir valores vÃ¡lidos\r\n    const nota1 = parseFloat(b1) || 0;\r\n    const nota2 = parseFloat(b2) || 0;\r\n    const nota3 = parseFloat(b3) || 0;\r\n    const nota4 = parseFloat(b4) || 0;\r\n    \r\n    const media = ((nota1 + nota2 + nota3 + nota4) / 4).toFixed(1);\r\n    const situacao = parseFloat(media) >= 6 ? 'Aprovado' : 'Em RecuperaÃ§Ã£o';\r\n    return { media: parseFloat(media), situacao };\r\n  };\r\n\r\n  const addDisciplina = () => {\r\n    const novaDisciplina = {\r\n      id: Date.now().toString(), // ğŸ”¥ CORREÃ‡ÃƒO: Garantir que Ã© string\r\n      nome: '',\r\n      serie: aluno?.serieAno || '',\r\n      bimestre1: 0,\r\n      bimestre2: 0,\r\n      bimestre3: 0,\r\n      bimestre4: 0,\r\n      mediaFinal: 0,\r\n      situacao: 'Em RecuperaÃ§Ã£o'\r\n    };\r\n    setDisciplinas([...disciplinas, novaDisciplina]);\r\n  };\r\n\r\n  const salvarNotas = () => {\r\n    onSave();\r\n  };\r\n\r\n  // ğŸ”¥ CORREÃ‡ÃƒO: FunÃ§Ã£o para atualizar notas com cÃ¡lculo automÃ¡tico\r\n  const atualizarNota = (index, campo, valor) => {\r\n    const novasDisciplinas = [...disciplinas];\r\n    const disciplina = novasDisciplinas[index];\r\n    \r\n    // Converter valor para nÃºmero\r\n    const valorNumerico = parseFloat(valor) || 0;\r\n    \r\n    // Limitar entre 0 e 10\r\n    const valorLimitado = Math.min(10, Math.max(0, valorNumerico));\r\n    \r\n    // Atualizar o campo especÃ­fico\r\n    disciplina[campo] = valorLimitado;\r\n    \r\n    // ğŸ”¥ CORREÃ‡ÃƒO: Calcular mÃ©dia e situaÃ§Ã£o automaticamente\r\n    const { media, situacao } = calcularMediaESituacao(\r\n      disciplina.bimestre1,\r\n      disciplina.bimestre2,\r\n      disciplina.bimestre3,\r\n      disciplina.bimestre4\r\n    );\r\n    \r\n    disciplina.mediaFinal = media;\r\n    disciplina.situacao = situacao;\r\n    \r\n    setDisciplinas(novasDisciplinas);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content\" style={{ maxWidth: '800px', maxHeight: '90vh', overflow: 'auto' }}>\r\n        <h2>ğŸ“Š Gerar Boletim - {aluno.nome}</h2>\r\n        <p><strong>SÃ©rie/Turma:</strong> {aluno.serieAno}Âº ano {aluno.turma}</p>\r\n        \r\n        <div className=\"boletim-section\">\r\n          <div className=\"boletim-header\">\r\n            <h3>Disciplinas e Notas</h3>\r\n            <button onClick={addDisciplina} style={{ background: '#38a169' }}>\r\n              + Adicionar Disciplina\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"disciplinas-list\">\r\n            {disciplinas.map((disciplina, index) => (\r\n              <div key={disciplina.id} className=\"disciplina-card\">\r\n                <div className=\"disciplina-header\">\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Nome da disciplina\"\r\n                    value={disciplina.nome}\r\n                    onChange={(e) => {\r\n                      const novasDisciplinas = [...disciplinas];\r\n                      novasDisciplinas[index].nome = e.target.value;\r\n                      setDisciplinas(novasDisciplinas);\r\n                    }}\r\n                    style={{ flex: 1, marginRight: '10px' }}\r\n                  />\r\n                  <button \r\n                    onClick={() => {\r\n                      const novasDisciplinas = disciplinas.filter((_, i) => i !== index);\r\n                      setDisciplinas(novasDisciplinas);\r\n                    }}\r\n                    style={{ background: '#e53e3e' }}\r\n                  >\r\n                    âŒ\r\n                  </button>\r\n                </div>\r\n                \r\n                <div className=\"notas-grid\">\r\n                  <div className=\"nota-item\">\r\n                    <label>1Âº Bimestre:</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"10\"\r\n                      step=\"0.1\"\r\n                      value={disciplina.bimestre1}\r\n                      onChange={(e) => atualizarNota(index, 'bimestre1', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"nota-item\">\r\n                    <label>2Âº Bimestre:</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"10\"\r\n                      step=\"0.1\"\r\n                      value={disciplina.bimestre2}\r\n                      onChange={(e) => atualizarNota(index, 'bimestre2', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"nota-item\">\r\n                    <label>3Âº Bimestre:</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"10\"\r\n                      step=\"0.1\"\r\n                      value={disciplina.bimestre3}\r\n                      onChange={(e) => atualizarNota(index, 'bimestre3', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"nota-item\">\r\n                    <label>4Âº Bimestre:</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      max=\"10\"\r\n                      step=\"0.1\"\r\n                      value={disciplina.bimestre4}\r\n                      onChange={(e) => atualizarNota(index, 'bimestre4', e.target.value)}\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div className=\"nota-item media\">\r\n                    <label>MÃ©dia Final:</label>\r\n                    <span className=\"media-value\" style={{\r\n                      color: disciplina.mediaFinal >= 6 ? '#38a169' : '#e53e3e',\r\n                      fontWeight: 'bold'\r\n                    }}>\r\n                      {disciplina.mediaFinal.toFixed(1)}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"nota-item situacao\">\r\n                    <label>SituaÃ§Ã£o:</label>\r\n                    <span className=\"situacao-value\" style={{\r\n                      color: disciplina.situacao === 'Aprovado' ? '#38a169' : '#d69e2e',\r\n                      fontWeight: 'bold',\r\n                      padding: '4px 8px',\r\n                      borderRadius: '4px',\r\n                      background: disciplina.situacao === 'Aprovado' ? '#f0fff4' : '#fffaf0'\r\n                    }}>\r\n                      {disciplina.situacao}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"modal-actions\" style={{ marginTop: '20px' }}>\r\n          <button onClick={salvarNotas} style={{ background: '#38a169' }}>\r\n            ğŸ’¾ Salvar e Gerar Boletim\r\n          </button>\r\n          <button onClick={onClose} style={{ background: '#718096' }}>\r\n            âŒ Fechar\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Error Boundary Component\r\nclass ErrorBoundary extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    console.log('Erro:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <h1>Algo deu errado.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// ğŸ”¥ COMPONENTE App PRINCIPAL CORRIGIDO\r\nexport default function App() {\r\n  // âœ… CORRETO: Todos os hooks DENTRO do componente\r\n  const [showDeclaracaoModal, setShowDeclaracaoModal] = useState(false);\r\n  const [showBoletimModal, setShowBoletimModal] = useState(false);\r\n  const [students, setStudents] = useState([]);\r\n  const [allStudents, setAllStudents] = useState([]);\r\n  const [q, setQ] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [limit] = useState(50);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selected, setSelected] = useState(null);\r\n  const [editing, setEditing] = useState(false);\r\n  const [creating, setCreating] = useState(false);\r\n  const [total, setTotal] = useState(0);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [seriesStats, setSeriesStats] = useState({});\r\n  const [localidadeStats, setLocalidadeStats] = useState({});\r\n  const [dashboardLoading, setDashboardLoading] = useState(false);\r\n  const [documentType, setDocumentType] = useState('');\r\n  const [showDataPanel, setShowDataPanel] = useState(true);\r\n  const [disciplinas, setDisciplinas] = useState([]);\r\n  \r\n  // Estados para controlar visibilidade dos dashboards\r\n  const [showSeriesDashboard, setShowSeriesDashboard] = useState(false);\r\n  const [showLocalidadeDashboard, setShowLocalidadeDashboard] = useState(false);\r\n\r\n  // ğŸ”¥ DEBUG EXTREMO: Verifique TODOS os campos antes do envio\r\n  useEffect(() => {\r\n    if (selected && (editing || creating)) {\r\n      console.log('ğŸ”ğŸ”ğŸ” DEBUG EXTREMO - Todos os campos do aluno:');\r\n      Object.keys(selected).forEach(key => {\r\n        console.log(`- \"${key}\":`, selected[key]);\r\n      });\r\n    }\r\n  }, [selected, editing, creating]);\r\n\r\n  // ğŸ”¥ FUNÃ‡ÃƒO PARA TOGGLE DO PAINEL DE DADOS\r\n  const toggleDataPanel = () => {\r\n    setShowDataPanel(!showDataPanel);\r\n  };\r\n\r\n  // ğŸ”¥ FUNÃ‡ÃƒO PARA ABRIR MODAL DE BOLETIM\r\n  const openBoletimModal = () => {\r\n    if (!selected) {\r\n      alert('Selecione um aluno primeiro');\r\n      return;\r\n    }\r\n    // ğŸ”¥ CORREÃ‡ÃƒO: Carregar disciplinas existentes ou inicializar vazio\r\n    if (selected.notas && Array.isArray(selected.notas)) {\r\n      setDisciplinas(selected.notas.map(nota => ({\r\n        ...nota,\r\n        id: nota.id || Date.now().toString() // ğŸ”¥ CORREÃ‡ÃƒO: Garantir ID como string\r\n      })));\r\n    } else {\r\n      setDisciplinas([]);\r\n    }\r\n    setShowBoletimModal(true);\r\n  };\r\n\r\n  // ğŸ”¥ CORREÃ‡ÃƒO: Aluno vazio para criaÃ§Ã£o com TODOS os campos\r\n  const emptyStudent = {\r\n    nome: '',\r\n    dataNascimento: '',\r\n    cpf: '',\r\n    cartaoSUS: '',\r\n    serieAno: '',\r\n    turma: '',\r\n    turno: '',\r\n    status: 'Matriculado',\r\n    transporte: '',\r\n    localidade: '',\r\n    nomeMae: '',\r\n    nomePai: ''\r\n  };\r\n\r\n  // Carregar TODOS os alunos para o dashboard\r\n  const loadAllStudents = async () => {\r\n    setDashboardLoading(true);\r\n    try {\r\n      const resp = await fetchStudents({ page: 1, limit: 1000, q: '' });\r\n      setAllStudents(resp.data || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados do dashboard:', error);\r\n    } finally {\r\n      setDashboardLoading(false);\r\n    }\r\n  };\r\n\r\n  // Carregar alunos com busca inteligente\r\n  async function load(searchTerm = q) {\r\n    setLoading(true);\r\n    try {\r\n      const resp = await fetchStudents({ page, limit, q: searchTerm });\r\n      setStudents(resp.data || []);\r\n      setTotal(resp.total || 0);\r\n      setTotalPages(resp.totalPages || 0);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar alunos:', error);\r\n      alert('Erro ao carregar dados');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Calcular estatÃ­sticas com TODOS os alunos\r\n  useEffect(() => {\r\n    if (allStudents.length > 0) {\r\n      const statsSeries = {};\r\n      const statsLocalidades = {};\r\n      let totalGeral = 0;\r\n      \r\n      allStudents.forEach(student => {\r\n        const serie = student.serieAno?.toString().trim() || 'NÃ£o informada';\r\n        const turma = student.turma?.toString().trim() || 'Sem turma';\r\n        const localidade = student.localidade?.toString().trim() || 'NÃ£o informada';\r\n        \r\n        totalGeral++;\r\n        \r\n        // EstatÃ­stica por sÃ©rie\r\n        if (!statsSeries[serie]) {\r\n          statsSeries[serie] = {\r\n            count: 0,\r\n            turmas: {}\r\n          };\r\n        }\r\n        statsSeries[serie].count++;\r\n        \r\n        if (!statsSeries[serie].turmas[turma]) {\r\n          statsSeries[serie].turmas[turma] = 0;\r\n        }\r\n        statsSeries[serie].turmas[turma]++;\r\n        \r\n        // EstatÃ­stica por localidade\r\n        if (!statsLocalidades[localidade]) {\r\n          statsLocalidades[localidade] = {\r\n            count: 0,\r\n            series: {}\r\n          };\r\n        }\r\n        statsLocalidades[localidade].count++;\r\n        \r\n        // EstatÃ­stica por sÃ©rie dentro da localidade\r\n        if (!statsLocalidades[localidade].series[serie]) {\r\n          statsLocalidades[localidade].series[serie] = 0;\r\n        }\r\n        statsLocalidades[localidade].series[serie]++;\r\n      });\r\n      \r\n      statsSeries.totalGeral = totalGeral;\r\n      setSeriesStats(statsSeries);\r\n      setLocalidadeStats(statsLocalidades);\r\n    } else {\r\n      setSeriesStats({});\r\n      setLocalidadeStats({});\r\n    }\r\n  }, [allStudents]);\r\n\r\n  // Carregar dados do dashboard na inicializaÃ§Ã£o\r\n  useEffect(() => {\r\n    loadAllStudents();\r\n    load();\r\n  }, []);\r\n\r\n  // Debounce para pesquisa\r\n  const debouncedSearch = useCallback((searchTerm) => {\r\n    const timer = setTimeout(() => {\r\n      setPage(1);\r\n      load(searchTerm);\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (q !== '') {\r\n      debouncedSearch(q);\r\n    } else {\r\n      setPage(1);\r\n      load();\r\n    }\r\n  }, [q, debouncedSearch]);\r\n\r\n  // Recarregar quando mudar pÃ¡gina\r\n  useEffect(() => { \r\n    if (q === '') {\r\n      load();\r\n    }\r\n  }, [page]);\r\n\r\n  // Recarregar dashboard apÃ³s criar/editar/excluir\r\n  const handleStudentChange = () => {\r\n    loadAllStudents();\r\n    load();\r\n  };\r\n\r\n  // Busca manual\r\n  function handleSearch() {\r\n    setPage(1);\r\n    load();\r\n  }\r\n\r\n  // Abrir detalhes do aluno\r\n  async function openDetail(id) {\r\n    try {\r\n      console.log('ğŸ” Buscando aluno ID:', id);\r\n      const s = await getStudent(id);\r\n      console.log('âœ… Aluno carregado:', s);\r\n      setSelected(s);\r\n      setEditing(false);\r\n      setCreating(false);\r\n      setDocumentType(''); // Resetar tipo de documento\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao carregar detalhes:', error);\r\n      alert('Erro ao carregar detalhes do aluno: ' + error.message);\r\n    }\r\n  }\r\n\r\n  // ğŸ”¥ CORREÃ‡ÃƒO COMPLETA: FunÃ§Ã£o para limpar dados antes do envio\r\n  const cleanStudentData = (student) => {\r\n    const cleaned = { ...student };\r\n    \r\n    console.log('ğŸ§¹ Dados antes da limpeza:', cleaned);\r\n    \r\n    // Lista de campos problemÃ¡ticos para remover\r\n    const camposProblematicos = [\r\n      'Data de Masc.',\r\n      'Data de Masc',\r\n      'Data de Nasc.',\r\n      'Data de Nasc',\r\n      'Data de ',\r\n      '',\r\n      ' ',\r\n      undefined,\r\n      null\r\n    ];\r\n    \r\n    // Remover campos problemÃ¡ticos\r\n    Object.keys(cleaned).forEach(key => {\r\n      // Remover campos com nomes vazios, invÃ¡lidos ou problemÃ¡ticos\r\n      if (!key || \r\n          key.trim() === '' || \r\n          camposProblematicos.includes(key) ||\r\n          key.includes('Data de Masc') ||\r\n          key.includes('Data de Nasc')) {\r\n        console.log(`ğŸ—‘ï¸ Removendo campo problemÃ¡tico: \"${key}\"`);\r\n        delete cleaned[key];\r\n      }\r\n      \r\n      // Remover campos com valores undefined ou null\r\n      if (cleaned[key] === undefined || cleaned[key] === null) {\r\n        delete cleaned[key];\r\n      }\r\n      \r\n      // Converter campos string vazios para undefined (serÃ£o removidos)\r\n      if (typeof cleaned[key] === 'string' && cleaned[key].trim() === '') {\r\n        cleaned[key] = undefined;\r\n      }\r\n    });\r\n    \r\n    // ğŸ”¥ CORREÃ‡ÃƒO EXTRA: Remover qualquer campo que comece com \"Data de\"\r\n    Object.keys(cleaned).forEach(key => {\r\n      if (key.startsWith('Data de')) {\r\n        console.log(`ğŸ—‘ï¸ Removendo campo que comeÃ§a com \"Data de\": \"${key}\"`);\r\n        delete cleaned[key];\r\n      }\r\n    });\r\n    \r\n    // ğŸ”¥ GARANTIR que campos obrigatÃ³rios tenham nomes corretos\r\n    if (cleaned.dataNascimento === undefined && cleaned['Data de Nascimento']) {\r\n      cleaned.dataNascimento = cleaned['Data de Nascimento'];\r\n      delete cleaned['Data de Nascimento'];\r\n    }\r\n    \r\n    // Remover qualquer campo undefined restante\r\n    Object.keys(cleaned).forEach(key => {\r\n      if (cleaned[key] === undefined) {\r\n        delete cleaned[key];\r\n      }\r\n    });\r\n    \r\n    console.log('âœ… Dados apÃ³s limpeza:', cleaned);\r\n    return cleaned;\r\n  };\r\n\r\n  // Salvar ediÃ§Ã£o\r\n  async function save() {\r\n    if (!selected || !selected._id) {\r\n      alert('Nenhum aluno selecionado para salvar');\r\n      return;\r\n    }\r\n    try {\r\n      console.log('ğŸ’¾ Salvando aluno (ORIGINAL):', selected);\r\n      \r\n      // ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\r\n      const cleanedData = cleanStudentData(selected);\r\n      console.log('ğŸ§¹ Dados limpos para envio:', cleanedData);\r\n      \r\n      // ğŸ”¥ VERIFICAÃ‡ÃƒO EXTRA: Log dos campos que serÃ£o enviados\r\n      console.log('ğŸ“¤ Campos que serÃ£o enviados:', Object.keys(cleanedData));\r\n      \r\n      const res = await updateStudent(selected._id, cleanedData);\r\n      setSelected(res);\r\n      setEditing(false);\r\n      handleStudentChange();\r\n      alert('Aluno atualizado com sucesso!');\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao salvar:', error);\r\n      \r\n      // ğŸ”¥ CORREÃ‡ÃƒO: Declarar cleanedData dentro do catch tambÃ©m\r\n      let cleanedData;\r\n      try {\r\n        cleanedData = cleanStudentData(selected);\r\n      } catch (cleanError) {\r\n        console.error('âŒ Erro ao limpar dados:', cleanError);\r\n        cleanedData = { ...selected }; // Fallback\r\n      }\r\n      \r\n      // ğŸ”¥ DEBUG DETALHADO\r\n      console.log('ğŸ” DEBUG - Dados que tentaram ser enviados:');\r\n      console.log('- selected:', selected);\r\n      console.log('- cleanedData:', cleanedData);\r\n      \r\n      alert('Erro ao salvar alteraÃ§Ãµes: ' + error.message);\r\n    }\r\n  }\r\n\r\n  // Excluir aluno\r\n  async function remove(id) {\r\n    if (!id) {\r\n      alert('ID do aluno nÃ£o encontrado');\r\n      return;\r\n    }\r\n    \r\n    if (!window.confirm('Tem certeza que deseja excluir este aluno?')) return;\r\n    \r\n    try {\r\n      console.log('ğŸ—‘ï¸ Excluindo aluno ID:', id);\r\n      await deleteStudent(id);\r\n      setSelected(null);\r\n      handleStudentChange();\r\n      alert('Aluno excluÃ­do com sucesso!');\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao excluir:', error);\r\n      alert('Erro ao excluir aluno: ' + error.message);\r\n    }\r\n  }\r\n\r\n  // Criar novo aluno\r\n  async function createNewStudent() {\r\n    if (!selected) {\r\n      alert('Preencha os dados do aluno');\r\n      return;\r\n    }\r\n\r\n    // ValidaÃ§Ã£o bÃ¡sica no frontend\r\n    if (!selected.nome || !selected.nome.trim()) {\r\n      alert('Nome Ã© obrigatÃ³rio');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('â• Criando novo aluno:', selected);\r\n      \r\n      // ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\r\n      const cleanedData = cleanStudentData(selected);\r\n      console.log('ğŸ§¹ Dados limpos para criaÃ§Ã£o:', cleanedData);\r\n\r\n      const createdStudent = await createStudent(cleanedData);\r\n      \r\n      alert('Aluno criado com sucesso!');\r\n      setCreating(false);\r\n      setSelected(null);\r\n      handleStudentChange();\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Erro ao criar aluno:', error);\r\n      \r\n      // Mensagem de erro mais amigÃ¡vel\r\n      let errorMessage = 'Erro ao criar aluno';\r\n      \r\n      if (error.message.includes('400')) {\r\n        errorMessage = 'Dados invÃ¡lidos. Verifique os campos obrigatÃ³rios.';\r\n      } else if (error.message.includes('CPF jÃ¡ cadastrado')) {\r\n        errorMessage = 'CPF jÃ¡ estÃ¡ cadastrado no sistema.';\r\n      } else if (error.message.includes('NetworkError')) {\r\n        errorMessage = 'Erro de conexÃ£o. Verifique se o servidor estÃ¡ rodando.';\r\n      } else {\r\n        errorMessage = error.message || 'Erro desconhecido ao criar aluno';\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    }\r\n  }\r\n\r\n  // Iniciar criaÃ§Ã£o\r\n  function startCreate() {\r\n    setSelected({...emptyStudent});\r\n    setCreating(true);\r\n    setEditing(false);\r\n    setDocumentType('');\r\n  }\r\n\r\n  // Cancelar criaÃ§Ã£o\r\n  function cancelCreate() {\r\n    setCreating(false);\r\n    setSelected(null);\r\n    setDocumentType('');\r\n  }\r\n\r\n  // Gerar documentos\r\n  function generateDocument(type) {\r\n    if (!selected) {\r\n      alert('Selecione um aluno primeiro');\r\n      return;\r\n    }\r\n\r\n    setDocumentType(type);\r\n    \r\n    // Simular geraÃ§Ã£o de documento\r\n    const docContent = {\r\n      declaraÃ§Ã£o: `DeclaraÃ§Ã£o para ${selected.nome}`,\r\n      boletim: `Boletim de ${selected.nome} - ${selected.serieAno}Âª SÃ©rie ${selected.turma}`,\r\n      historico: `HistÃ³rico Escolar de ${selected.nome}`\r\n    };\r\n\r\n    const content = docContent[type];\r\n    \r\n    // Criar e baixar documento\r\n    const element = document.createElement('a');\r\n    const file = new Blob([content], { type: 'text/plain' });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = `${type}_${selected.nome}.txt`;\r\n    document.body.appendChild(element);\r\n    element.click();\r\n    document.body.removeChild(element);\r\n    \r\n    alert(`${type.charAt(0).toUpperCase() + type.slice(1)} gerado com sucesso!`);\r\n  }\r\n\r\n  // ğŸ”¥ CORREÃ‡ÃƒO COMPLETA: FunÃ§Ã£o para salvar notas\r\n  async function salvarNotas() {\r\n    if (!selected) return;\r\n    \r\n    try {\r\n      // ğŸ”¥ CORREÃ‡ÃƒO: Garantir que todas as disciplinas tenham IDs vÃ¡lidos e formato correto\r\n      const disciplinasFormatadas = disciplinas.map(disciplina => ({\r\n        id: disciplina.id || `disciplina_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n        nome: disciplina.nome || 'Disciplina nÃ£o nomeada',\r\n        serie: disciplina.serie || selected?.serieAno || '',\r\n        // ğŸ”¥ CORREÃ‡ÃƒO: Garantir que todos os campos numÃ©ricos sejam numbers\r\n        bimestre1: parseFloat(disciplina.bimestre1) || 0,\r\n        bimestre2: parseFloat(disciplina.bimestre2) || 0,\r\n        bimestre3: parseFloat(disciplina.bimestre3) || 0,\r\n        bimestre4: parseFloat(disciplina.bimestre4) || 0,\r\n        mediaFinal: parseFloat(disciplina.mediaFinal) || 0,\r\n        situacao: disciplina.situacao || 'Em RecuperaÃ§Ã£o'\r\n      }));\r\n\r\n      const alunoAtualizado = {\r\n        ...selected,\r\n        notas: disciplinasFormatadas\r\n      };\r\n      \r\n      // ğŸ”¥ CORREÃ‡ÃƒO: Limpar dados antes do envio\r\n      const cleanedData = cleanStudentData(alunoAtualizado);\r\n      console.log('ğŸ“Š Salvando notas:', cleanedData);\r\n      \r\n      await updateStudent(selected._id, cleanedData);\r\n      setSelected(alunoAtualizado);\r\n      setShowBoletimModal(false);\r\n      alert('Notas salvas com sucesso!');\r\n      \r\n      // Recarregar dados\r\n      handleStudentChange();\r\n    } catch (error) {\r\n      console.error('âŒ Erro ao salvar notas:', error);\r\n      alert('Erro ao salvar notas: ' + error.message);\r\n    }\r\n  }\r\n\r\n  // Pesquisas rÃ¡pidas por sÃ©rie/turma\r\n  function quickSearch(term) {\r\n    setQ(term);\r\n    setPage(1);\r\n  }\r\n\r\n  return (\r\n    <ErrorBoundary>\r\n      <div className=\"container\">\r\n        <header>\r\n          <div>\r\n            <h1>GEA (Gerenciamento Educacional e Administrativo)</h1>\r\n            <h2>E. E. F. NAIR CUNHA DE AGUIAR</h2>\r\n          </div>\r\n          <div className=\"controls\">\r\n            <input \r\n              placeholder=\"Buscar por: nome, CPF, sÃ©rie, turma, localidade...\" \r\n              value={q} \r\n              onChange={e => setQ(e.target.value)}\r\n              onKeyPress={e => e.key === 'Enter' && handleSearch()}\r\n            />\r\n            <button onClick={handleSearch}>Buscar</button>\r\n            \r\n            <button \r\n              onClick={startCreate}\r\n              style={{ background: '#38a169', marginLeft: '8px' }}\r\n            >\r\n              + Novo Aluno\r\n            </button>\r\n            \r\n            {/* ğŸ”¥ BOTÃƒO PARA OCULTAR/MOSTRAR DADOS */}\r\n            <button \r\n              onClick={toggleDataPanel}\r\n              style={{ \r\n                background: showDataPanel ? '#ed8936' : '#4299e1', \r\n                marginLeft: '8px' \r\n              }}\r\n            >\r\n              {showDataPanel ? 'ğŸ“‹ Ocultar Dados' : 'ğŸ“‹ Mostrar Dados'}\r\n            </button>\r\n            \r\n            {/* BotÃµes para mostrar/ocultar dashboards */}\r\n            <button \r\n              onClick={() => setShowSeriesDashboard(!showSeriesDashboard)}\r\n              style={{ \r\n                background: showSeriesDashboard ? '#ed8936' : '#4299e1', \r\n                marginLeft: '8px' \r\n              }}\r\n            >\r\n              {showSeriesDashboard ? 'ğŸ“Š Ocultar SÃ©ries' : 'ğŸ“Š Ver SÃ©ries'}\r\n            </button>\r\n            \r\n            <button \r\n              onClick={() => setShowLocalidadeDashboard(!showLocalidadeDashboard)}\r\n              style={{ \r\n                background: showLocalidadeDashboard ? '#ed8936' : '#48bb78', \r\n                marginLeft: '8px' \r\n              }}\r\n            >\r\n              {showLocalidadeDashboard ? 'ğŸ˜ï¸ Ocultar Localidades' : 'ğŸ˜ï¸ Ver Localidades'}\r\n            </button>\r\n            \r\n            {q && (\r\n              <button \r\n                onClick={() => {\r\n                  setQ('');\r\n                  setPage(1);\r\n                }}\r\n                style={{ marginLeft: '8px', background: '#718096' }}\r\n              >\r\n                Limpar\r\n              </button>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Pesquisas rÃ¡pidas */}\r\n          <div className=\"quick-search\">\r\n            <small>\r\n              ğŸ” <strong>Pesquisas rÃ¡pidas:</strong>\r\n              <button onClick={() => quickSearch('8 A')} className=\"quick-btn\">8Â° A</button>\r\n              <button onClick={() => quickSearch('8 B')} className=\"quick-btn\">8Â° B</button>\r\n              <button onClick={() => quickSearch('8')} className=\"quick-btn\">8Â° Ano</button>\r\n              <button onClick={() => quickSearch('9 U')} className=\"quick-btn\">9Â° U</button>\r\n              <button onClick={() => quickSearch('2 U')} className=\"quick-btn\">2Â° U</button>\r\n            </small>\r\n          </div>\r\n\r\n          {!q && (\r\n            <div className=\"search-tips\">\r\n              <small>\r\n                ğŸ’¡ <strong>Dicas:</strong> \r\n                \"2\" (sÃ©rie) â€¢ \"A\" (turma) â€¢ \"09565384366\" (CPF) â€¢ \"Goiabeira\" (localidade) â€¢ \"Ana\" (nome) â€¢ \"8 A\" (sÃ©rie e turma)\r\n              </small>\r\n            </div>\r\n          )}\r\n        </header>\r\n\r\n        {/* DASHBOARDS CONDICIONAIS - SÃ“ MOSTRAR SE O BOTÃƒO FOR CLICADO */}\r\n        {showSeriesDashboard && (\r\n          <StatsDashboard \r\n            seriesStats={seriesStats}\r\n            allStudents={allStudents}\r\n            dashboardLoading={dashboardLoading}\r\n          />\r\n        )}\r\n\r\n        {showLocalidadeDashboard && (\r\n          <LocalidadeDashboard \r\n            localidadeStats={localidadeStats}\r\n            seriesStats={seriesStats}\r\n            allStudents={allStudents}\r\n            dashboardLoading={dashboardLoading}\r\n          />\r\n        )}\r\n\r\n        {/* PAINEL DE DETALHES COMPLETO E CORRIGIDO */}\r\n        {showDataPanel && (\r\n          <section className=\"detail-panel\">\r\n            {selected ? (\r\n              <div className=\"detail-content\">\r\n                <h2>\r\n                  {creating ? 'Novo Aluno' : editing ? 'Editando Aluno' : 'Detalhes do Aluno'}\r\n                </h2>\r\n                \r\n                {editing || creating ? (\r\n                  <div className=\"form\">\r\n                    <label>\r\n                      Nome:\r\n                      <input \r\n                        value={selected.nome || ''} \r\n                        onChange={e => setSelected({...selected, nome: e.target.value})}\r\n                        placeholder=\"Nome completo do aluno\"\r\n                      />\r\n                    </label>\r\n                    \r\n                    {/* ğŸ”¥ CORREÃ‡ÃƒO: Campo com nome CORRETO e consistente */}\r\n                    <label>\r\n                      Data de Nascimento:\r\n                      <input \r\n                        type=\"date\"\r\n                        name=\"dataNascimento\" // ğŸ”¥ ADICIONE ESTE name\r\n                        value={selected.dataNascimento ? new Date(selected.dataNascimento).toISOString().split('T')[0] : ''} \r\n                        onChange={e => setSelected({...selected, dataNascimento: e.target.value})}\r\n                      />\r\n                    </label>\r\n                    \r\n                    <label>\r\n                      CPF:\r\n                      <input \r\n                        value={selected.cpf || ''} \r\n                        onChange={e => setSelected({...selected, cpf: e.target.value})}\r\n                        placeholder=\"000.000.000-00\"\r\n                      />\r\n                    </label>\r\n                    \r\n                    {/* ğŸ”¥ CORREÃ‡ÃƒO: Campos com placeholders e valores padrÃ£o */}\r\n                    <label>\r\n                      Nome da MÃ£e:\r\n                      <input \r\n                        value={selected.nomeMae || ''} \r\n                        onChange={e => setSelected({...selected, nomeMae: e.target.value})}\r\n                        placeholder=\"Nome completo da mÃ£e\"\r\n                      />\r\n                    </label>\r\n                    <label>\r\n                      Nome do Pai:\r\n                      <input \r\n                        value={selected.nomePai || ''} \r\n                        onChange={e => setSelected({...selected, nomePai: e.target.value})}\r\n                        placeholder=\"Nome completo do pai\"\r\n                      />\r\n                    </label>\r\n                    <label>\r\n                      Status:\r\n                      <select \r\n                        value={selected.status || 'Matriculado'} \r\n                        onChange={e => setSelected({...selected, status: e.target.value})}\r\n                      >\r\n                        <option value=\"Matriculado\">Matriculado</option>\r\n                        <option value=\"Transferido\">Transferido</option>\r\n                        <option value=\"ConcluÃ­do\">ConcluÃ­do</option>\r\n                      </select>\r\n                    </label>\r\n                    \r\n                    <label>\r\n                      SÃ©rie/Ano:\r\n                      <input \r\n                        value={selected.serieAno || ''} \r\n                        onChange={e => setSelected({...selected, serieAno: e.target.value})}\r\n                        placeholder=\"Ex: 8\"\r\n                      />\r\n                    </label>\r\n                    <label>\r\n                      Turma:\r\n                      <input \r\n                        value={selected.turma || ''} \r\n                        onChange={e => setSelected({...selected, turma: e.target.value})}\r\n                        placeholder=\"Ex: A\"\r\n                      />\r\n                    </label>\r\n                    <label>\r\n                      Localidade:\r\n                      <input \r\n                        value={selected.localidade || ''} \r\n                        onChange={e => setSelected({...selected, localidade: e.target.value})}\r\n                        placeholder=\"Ex: Goiabeira\"\r\n                      />\r\n                    </label>\r\n                    \r\n                    <div className=\"actions\">\r\n                      {creating ? (\r\n                        <>\r\n                          <button onClick={createNewStudent}>Criar Aluno</button>\r\n                          <button onClick={cancelCreate}>Cancelar</button>\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <button onClick={save}>Salvar</button>\r\n                          <button onClick={() => setEditing(false)}>Cancelar</button>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"read\">\r\n                    <div><strong>Nome:</strong> {selected.nome}</div>\r\n                    <div><strong>Data Nasc.:</strong> {selected.dataNascimento ? new Date(selected.dataNascimento).toLocaleDateString('pt-BR') : ''}</div>\r\n                    <div><strong>CPF:</strong> {selected.cpf}</div>\r\n                    \r\n                    {/* ğŸ”¥ NOVOS CAMPOS EXIBIÃ‡ÃƒO */}\r\n                    <div><strong>Nome da MÃ£e:</strong> {selected.nomeMae || 'NÃ£o informado'}</div>\r\n                    <div><strong>Nome do Pai:</strong> {selected.nomePai || 'NÃ£o informado'}</div>\r\n                    <div><strong>Status:</strong> {selected.status || 'Matriculado'}</div>\r\n                    \r\n                    <div><strong>SÃ©rie/Ano:</strong> {selected.serieAno}</div>\r\n                    <div><strong>Turma:</strong> {selected.turma}</div>\r\n                    <div><strong>Localidade:</strong> {selected.localidade}</div>\r\n                    \r\n                    {/* BotÃµes de documentos */}\r\n                    <div className=\"document-actions\" style={{ margin: '15px 0', padding: '10px', background: '#f7fafc', borderRadius: '6px' }}>\r\n                      <h4>ğŸ“„ Gerar Documentos:</h4>\r\n                      <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                        <button \r\n                          onClick={() => setShowDeclaracaoModal(true)}\r\n                          style={{ background: '#4299e1' }}\r\n                        >\r\n                          ğŸ“ DeclaraÃ§Ã£o\r\n                        </button>\r\n\r\n                        <button \r\n                          onClick={openBoletimModal}\r\n                          style={{ background: '#48bb78' }}\r\n                        >\r\n                          ğŸ“Š Boletim\r\n                        </button>\r\n                        <button \r\n                          onClick={() => generateDocument('historico')}\r\n                          style={{ background: '#ed8936' }}\r\n                        >\r\n                          ğŸ“š HistÃ³rico\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"actions\">\r\n                      <button onClick={() => setEditing(true)}>âœï¸ Editar</button>\r\n                      <button onClick={() => remove(selected._id)} style={{background: '#e53e3e'}}>\r\n                        ğŸ—‘ï¸ Excluir\r\n                      </button>\r\n                      <button onClick={() => setSelected(null)}>âŒ Fechar</button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"empty-detail\">\r\n                {creating ? 'Preencha os dados do novo aluno' : 'Selecione um aluno para ver os detalhes'}\r\n              </div>\r\n            )}\r\n          </section>\r\n        )}\r\n\r\n        <main>\r\n          <section className=\"list\">\r\n            <div className=\"meta\">\r\n              <div>Total na busca: {total}</div>\r\n              {q && <div>Filtro: \"{q}\"</div>}\r\n              <div>\r\n                PÃ¡gina {page} de {totalPages} â€” \r\n                <button \r\n                  disabled={page <= 1}\r\n                  onClick={() => setPage(p => Math.max(1, p - 1))}\r\n                >â—€</button>\r\n                <button \r\n                  disabled={page >= totalPages}\r\n                  onClick={() => setPage(p => p + 1)}\r\n                >â–¶</button>\r\n              </div>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div>Carregando...</div>\r\n            ) : students.length === 0 ? (\r\n              <div style={{ padding: '20px', textAlign: 'center', color: '#718096' }}>\r\n                {q ? `Nenhum aluno encontrado para \"${q}\"` : 'Nenhum aluno cadastrado'}\r\n              </div>\r\n            ) : (\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>Nome</th>\r\n                    <th>Data Nasc.</th>\r\n                    <th>CPF</th>\r\n                    <th>SÃ©rie</th>\r\n                    <th>Turma</th>\r\n                    <th>Localidade</th>\r\n                    <th></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {students.map(s => (\r\n                    <tr key={s._id || s.cpf}>\r\n                      <td>{s.nome}</td>\r\n                      <td>{s.dataNascimento ? new Date(s.dataNascimento).toLocaleDateString('pt-BR') : ''}</td>\r\n                      <td>{s.cpf}</td>\r\n                      <td>{s.serieAno}</td>\r\n                      <td>{s.turma}</td>\r\n                      <td>{s.localidade}</td>\r\n                      <td>\r\n                        <button onClick={() => openDetail(s._id)}>Abrir</button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n          </section>\r\n        </main>\r\n\r\n        {/* âœ… CORRETO: Modal FORA da tabela, no final do componente */}\r\n        {showDeclaracaoModal && (\r\n          <DeclaracaoModal \r\n            aluno={selected}\r\n            onClose={() => setShowDeclaracaoModal(false)}\r\n          />\r\n        )}\r\n\r\n        {showBoletimModal && (\r\n          <BoletimModal \r\n            aluno={selected}\r\n            disciplinas={disciplinas}\r\n            setDisciplinas={setDisciplinas}\r\n            onClose={() => setShowBoletimModal(false)}\r\n            onSave={salvarNotas}\r\n          />\r\n        )}\r\n\r\n        <footer>\r\n          <small>API: http://localhost:4000/api/students</small>\r\n        </footer>\r\n      </div>\r\n    </ErrorBoundary>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}