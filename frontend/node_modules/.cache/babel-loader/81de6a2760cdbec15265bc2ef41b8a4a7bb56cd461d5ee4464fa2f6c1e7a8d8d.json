{"ast":null,"code":"// import React, { useEffect, useState, useCallback } from 'react';\n// import { fetchStudents, getStudent, updateStudent, deleteStudent, createStudent } from './api';\n\n// // üî• COMPONENTES MOVIDOS PARA FORA DO COMPONENTE App\n\n// // Componente do Dashboard de Estat√≠sticas\n// const StatsDashboard = ({ seriesStats, allStudents, dashboardLoading }) => {\n//   if (dashboardLoading) {\n//     return (\n//       <section className=\"stats-dashboard\">\n//         <h3>üìä Distribui√ß√£o por S√©rie/Turma</h3>\n//         <div className=\"stats-loading\">Carregando estat√≠sticas...</div>\n//       </section>\n//     );\n//   }\n\n//   if (Object.keys(seriesStats).length === 0 || !seriesStats.totalGeral) return null;\n\n//   // Remover totalGeral das s√©ries para ordena√ß√£o\n//   const { totalGeral, ...seriesData } = seriesStats;\n\n//   // Ordenar s√©ries numericamente\n//   const sortedSeries = Object.keys(seriesData).sort((a, b) => {\n//     if (a === 'N√£o informada') return 1;\n//     if (b === 'N√£o informada') return -1;\n//     const numA = parseInt(a) || 0;\n//     const numB = parseInt(b) || 0;\n//     return numA - numB;\n//   });\n\n//   return (\n//     <section className=\"stats-dashboard\">\n//       <h3>üìä Distribui√ß√£o por S√©rie/Turma - Total: {totalGeral || allStudents.length} alunos</h3>\n//       <div className=\"stats-grid\">\n//         {sortedSeries.map(serie => (\n//           <div key={serie} className=\"stat-card\">\n//             <div className=\"stat-header\">\n//               <span className=\"stat-title\">\n//                 {serie === 'N√£o informada' ? '‚ùì' : 'üìö'} {serie}¬™ S√©rie\n//               </span>\n//               <span className=\"stat-total\">{seriesData[serie].count} alunos</span>\n//             </div>\n\n//             <div className=\"stat-turmas\">\n//               {Object.entries(seriesData[serie].turmas)\n//                 .sort(([turmaA], [turmaB]) => turmaA.localeCompare(turmaB))\n//                 .map(([turma, count]) => (\n//                 <div key={turma} className=\"turma-item\">\n//                   <span className=\"turma-name\">\n//                     {turma === 'Sem turma' ? 'üè´ Geral' : `Turma ${turma}`}\n//                   </span>\n//                   <span className=\"turma-count\">{count}</span>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n//         ))}\n\n//         {/* Card de total geral */}\n//         <div className=\"stat-card total-card\">\n//           <div className=\"stat-header\">\n//             <span className=\"stat-title\">üë• Total Geral</span>\n//             <span className=\"stat-total\">{totalGeral || allStudents.length} alunos</span>\n//           </div>\n//           <div className=\"stat-turmas\">\n//             <div className=\"turma-item\">\n//               <span className=\"turma-name\">Todas as s√©ries</span>\n//               <span className=\"turma-count\">{totalGeral || allStudents.length}</span>\n//             </div>\n//             <div className=\"turma-item\">\n//               <span className=\"turma-name\">S√©ries com dados</span>\n//               <span className=\"turma-count\">{sortedSeries.length}</span>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </section>\n//   );\n// };\n\n// // Fun√ß√£o para obter √≠cones baseados na localidade\n// const getLocalidadeIcon = (localidade) => {\n//   const lowerLocalidade = localidade.toLowerCase();\n\n//   if (lowerLocalidade.includes('goiabeira')) return 'üå≥';\n//   if (lowerLocalidade.includes('oiticica')) return 'üåø';\n//   if (lowerLocalidade.includes('centro')) return 'üè¢';\n//   if (lowerLocalidade.includes('vila')) return 'üèòÔ∏è';\n//   if (lowerLocalidade.includes('bairro')) return 'üè°';\n//   if (lowerLocalidade.includes('rural')) return 'üöú';\n//   if (lowerLocalidade.includes('multir√£o')) return 'üë•';\n//   if (lowerLocalidade.includes('n√£o informada')) return '‚ùì';\n\n//   return 'üìç';\n// };\n\n// // Componente do Dashboard de Localidades\n// const LocalidadeDashboard = ({ localidadeStats, seriesStats, allStudents, dashboardLoading }) => {\n//   if (dashboardLoading) {\n//     return (\n//       <section className=\"stats-dashboard localidade-dashboard\">\n//         <h3>üèòÔ∏è Distribui√ß√£o por Localidade</h3>\n//         <div className=\"stats-loading\">Carregando estat√≠sticas por localidade...</div>\n//       </section>\n//     );\n//   }\n\n//   if (Object.keys(localidadeStats).length === 0) return null;\n\n//   // Ordenar localidades por quantidade (maior primeiro)\n//   const sortedLocalidades = Object.keys(localidadeStats).sort((a, b) => {\n//     return localidadeStats[b].count - localidadeStats[a].count;\n//   });\n\n//   // Pegar as top localidades (m√°ximo 8 para n√£o ficar muito grande)\n//   const topLocalidades = sortedLocalidades.slice(0, 8);\n\n//   return (\n//     <section className=\"stats-dashboard localidade-dashboard\">\n//       <h3>üèòÔ∏è Distribui√ß√£o por Localidade</h3>\n//       <div className=\"stats-grid\">\n//         {topLocalidades.map(localidade => (\n//           <div key={localidade} className=\"stat-card localidade-card\">\n//             <div className=\"stat-header\">\n//               <span className=\"stat-title\">\n//                 {getLocalidadeIcon(localidade)} {localidade}\n//               </span>\n//               <span className=\"stat-total\">{localidadeStats[localidade].count} alunos</span>\n//             </div>\n\n//             <div className=\"stat-turmas\">\n//               {Object.entries(localidadeStats[localidade].series)\n//                 .sort(([serieA], [serieB]) => {\n//                   if (serieA === 'N√£o informada') return 1;\n//                   if (serieB === 'N√£o informada') return -1;\n//                   const numA = parseInt(serieA) || 0;\n//                   const numB = parseInt(serieB) || 0;\n//                   return numA - numB;\n//                 })\n//                 .map(([serie, count]) => (\n//                 <div key={serie} className=\"turma-item\">\n//                   <span className=\"turma-name\">\n//                     {serie === 'N√£o informada' ? 'üìö Geral' : `${serie}¬™ S√©rie`}\n//                   </span>\n//                   <span className=\"turma-count\">{count}</span>\n//                 </div>\n//               ))}\n//             </div>\n//           </div>\n//         ))}\n\n//         {/* Card de resumo das localidades */}\n//         <div className=\"stat-card total-card localidade-total\">\n//           <div className=\"stat-header\">\n//             <span className=\"stat-title\">üó∫Ô∏è Resumo Localidades</span>\n//             <span className=\"stat-total\">{sortedLocalidades.length} locais</span>\n//           </div>\n//           <div className=\"stat-turmas\">\n//             <div className=\"turma-item\">\n//               <span className=\"turma-name\">Total de alunos</span>\n//               <span className=\"turma-count\">{seriesStats.totalGeral || allStudents.length}</span>\n//             </div>\n//             <div className=\"turma-item\">\n//               <span className=\"turma-name\">Localidades com dados</span>\n//               <span className=\"turma-count\">{sortedLocalidades.length}</span>\n//             </div>\n//             <div className=\"turma-item\">\n//               <span className=\"turma-name\">Maior localidade</span>\n//               <span className=\"turma-count\">\n//                 {sortedLocalidades[0] ? `${localidadeStats[sortedLocalidades[0]].count} alunos` : '-'}\n//               </span>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//     </section>\n//   );\n// };\n\n// // üî• COMPONENTE App PRINCIPAL CORRIGIDO\n// export default function App() {\n//   const [students, setStudents] = useState([]);\n//   const [allStudents, setAllStudents] = useState([]);\n//   const [q, setQ] = useState('');\n//   const [page, setPage] = useState(1);\n//   const [limit] = useState(50);\n//   const [loading, setLoading] = useState(false);\n//   const [selected, setSelected] = useState(null);\n//   const [editing, setEditing] = useState(false);\n//   const [creating, setCreating] = useState(false);\n//   const [total, setTotal] = useState(0);\n//   const [totalPages, setTotalPages] = useState(0);\n//   const [seriesStats, setSeriesStats] = useState({});\n//   const [localidadeStats, setLocalidadeStats] = useState({});\n//   const [dashboardLoading, setDashboardLoading] = useState(false);\n//   const [documentType, setDocumentType] = useState(''); // üî• NOVO: Tipo de documento para gerar\n\n//   // Aluno vazio para cria√ß√£o\n//   const emptyStudent = {\n//     nome: '',\n//     dataNascimento: '',\n//     cpf: '',\n//     cartaoSUS: '',\n//     serieAno: '',\n//     turma: '',\n//     turno: '',\n//     status: '',\n//     transporte: '',\n//     localidade: ''\n//   };\n\n//   // üî• NOVO: Carregar TODOS os alunos para o dashboard\n//   const loadAllStudents = async () => {\n//     setDashboardLoading(true);\n//     try {\n//       const resp = await fetchStudents({ page: 1, limit: 1000, q: '' });\n//       setAllStudents(resp.data || []);\n//     } catch (error) {\n//       console.error('Erro ao carregar dados do dashboard:', error);\n//     } finally {\n//       setDashboardLoading(false);\n//     }\n//   };\n\n//   // üî• ATUALIZADO: Carregar alunos com busca inteligente\n//   async function load(searchTerm = q) {\n//     setLoading(true);\n//     try {\n//       const resp = await fetchStudents({ page, limit, q: searchTerm });\n//       setStudents(resp.data || []);\n//       setTotal(resp.total || 0);\n//       setTotalPages(resp.totalPages || 0);\n//     } catch (error) {\n//       console.error('Erro ao carregar alunos:', error);\n//       alert('Erro ao carregar dados');\n//     } finally {\n//       setLoading(false);\n//     }\n//   }\n\n//   // üî• ATUALIZADO: Calcular estat√≠sticas com TODOS os alunos\n//   useEffect(() => {\n//     if (allStudents.length > 0) {\n//       const statsSeries = {};\n//       const statsLocalidades = {};\n//       let totalGeral = 0;\n\n//       allStudents.forEach(student => {\n//         const serie = student.serieAno?.toString().trim() || 'N√£o informada';\n//         const turma = student.turma?.toString().trim() || 'Sem turma';\n//         const localidade = student.localidade?.toString().trim() || 'N√£o informada';\n\n//         totalGeral++;\n\n//         // Estat√≠stica por s√©rie\n//         if (!statsSeries[serie]) {\n//           statsSeries[serie] = {\n//             count: 0,\n//             turmas: {}\n//           };\n//         }\n//         statsSeries[serie].count++;\n\n//         if (!statsSeries[serie].turmas[turma]) {\n//           statsSeries[serie].turmas[turma] = 0;\n//         }\n//         statsSeries[serie].turmas[turma]++;\n\n//         // üî• NOVO: Estat√≠stica por localidade\n//         if (!statsLocalidades[localidade]) {\n//           statsLocalidades[localidade] = {\n//             count: 0,\n//             series: {}\n//           };\n//         }\n//         statsLocalidades[localidade].count++;\n\n//         // Estat√≠stica por s√©rie dentro da localidade\n//         if (!statsLocalidades[localidade].series[serie]) {\n//           statsLocalidades[localidade].series[serie] = 0;\n//         }\n//         statsLocalidades[localidade].series[serie]++;\n//       });\n\n//       statsSeries.totalGeral = totalGeral;\n//       setSeriesStats(statsSeries);\n//       setLocalidadeStats(statsLocalidades);\n//     } else {\n//       setSeriesStats({});\n//       setLocalidadeStats({});\n//     }\n//   }, [allStudents]);\n\n//   // üî• NOVO: Carregar dados do dashboard na inicializa√ß√£o\n//   useEffect(() => {\n//     loadAllStudents();\n//     load();\n//   }, []);\n\n//   // Debounce para pesquisa\n//   const debouncedSearch = useCallback((searchTerm) => {\n//     const timer = setTimeout(() => {\n//       setPage(1);\n//       load(searchTerm);\n//     }, 500);\n//     return () => clearTimeout(timer);\n//   }, []);\n\n//   useEffect(() => {\n//     if (q !== '') {\n//       debouncedSearch(q);\n//     } else {\n//       setPage(1);\n//       load();\n//     }\n//   }, [q, debouncedSearch]);\n\n//   // Recarregar quando mudar p√°gina\n//   useEffect(() => { \n//     if (q === '') {\n//       load();\n//     }\n//   }, [page]);\n\n//   // üî• ATUALIZADO: Recarregar dashboard ap√≥s criar/editar/excluir\n//   const handleStudentChange = () => {\n//     loadAllStudents();\n//     load();\n//   };\n\n//   // Busca manual\n//   function handleSearch() {\n//     setPage(1);\n//     load();\n//   }\n\n//   // üî• CORRIGIDO: Abrir detalhes do aluno\n//   async function openDetail(id) {\n//     try {\n//       console.log('üîç Buscando aluno ID:', id);\n//       const s = await getStudent(id);\n//       console.log('‚úÖ Aluno carregado:', s);\n//       setSelected(s);\n//       setEditing(false);\n//       setCreating(false);\n//       setDocumentType(''); // Resetar tipo de documento\n//     } catch (error) {\n//       console.error('‚ùå Erro ao carregar detalhes:', error);\n//       alert('Erro ao carregar detalhes do aluno: ' + error.message);\n//     }\n//   }\n\n//   // üî• CORRIGIDO: Salvar edi√ß√£o\n//   async function save() {\n//     if (!selected || !selected._id) {\n//       alert('Nenhum aluno selecionado para salvar');\n//       return;\n//     }\n//     try {\n//       console.log('üíæ Salvando aluno:', selected);\n//       const res = await updateStudent(selected._id, selected);\n//       setSelected(res);\n//       setEditing(false);\n//       handleStudentChange();\n//       alert('Aluno atualizado com sucesso!');\n//     } catch (error) {\n//       console.error('‚ùå Erro ao salvar:', error);\n//       alert('Erro ao salvar altera√ß√µes: ' + error.message);\n//     }\n//   }\n\n//   // üî• CORRIGIDO: Excluir aluno\n//   async function remove(id) {\n//     if (!id) {\n//       alert('ID do aluno n√£o encontrado');\n//       return;\n//     }\n\n//     if (!window.confirm('Tem certeza que deseja excluir este aluno?')) return;\n\n//     try {\n//       console.log('üóëÔ∏è Excluindo aluno ID:', id);\n//       await deleteStudent(id);\n//       setSelected(null);\n//       handleStudentChange();\n//       alert('Aluno exclu√≠do com sucesso!');\n//     } catch (error) {\n//       console.error('‚ùå Erro ao excluir:', error);\n//       alert('Erro ao excluir aluno: ' + error.message);\n//     }\n//   }\n\n//   // üî• CORRIGIDO: Criar novo aluno\n//   // üî• CORRIGIDO: Criar novo aluno com melhor tratamento de erro\n// async function createNewStudent() {\n//   if (!selected) {\n//     alert('Preencha os dados do aluno');\n//     return;\n//   }\n\n//   // Valida√ß√£o b√°sica no frontend\n//   if (!selected.nome || !selected.nome.trim()) {\n//     alert('Nome √© obrigat√≥rio');\n//     return;\n//   }\n\n//   try {\n//     console.log('‚ûï Criando novo aluno:', selected);\n\n//     // Garantir que os dados estejam no formato correto\n//     const studentData = {\n//       ...selected,\n//       nome: selected.nome.trim(),\n//       dataNascimento: selected.dataNascimento || null,\n//       cpf: selected.cpf || '',\n//       serieAno: selected.serieAno || '',\n//       turma: selected.turma || '',\n//       localidade: selected.localidade || ''\n//     };\n\n//     const createdStudent = await createStudent(studentData);\n\n//     alert('Aluno criado com sucesso!');\n//     setCreating(false);\n//     setSelected(null);\n//     handleStudentChange();\n\n//   } catch (error) {\n//     console.error('‚ùå Erro ao criar aluno:', error);\n\n//     // Mensagem de erro mais amig√°vel\n//     let errorMessage = 'Erro ao criar aluno';\n\n//     if (error.message.includes('400')) {\n//       errorMessage = 'Dados inv√°lidos. Verifique os campos obrigat√≥rios.';\n//     } else if (error.message.includes('CPF j√° cadastrado')) {\n//       errorMessage = 'CPF j√° est√° cadastrado no sistema.';\n//     } else if (error.message.includes('NetworkError')) {\n//       errorMessage = 'Erro de conex√£o. Verifique se o servidor est√° rodando.';\n//     } else {\n//       errorMessage = error.message || 'Erro desconhecido ao criar aluno';\n//     }\n\n//     alert(errorMessage);\n//   }\n// }\n//   // Iniciar cria√ß√£o\n//   function startCreate() {\n//     setSelected({...emptyStudent});\n//     setCreating(true);\n//     setEditing(false);\n//     setDocumentType('');\n//   }\n\n//   // Cancelar cria√ß√£o\n//   function cancelCreate() {\n//     setCreating(false);\n//     setSelected(null);\n//     setDocumentType('');\n//   }\n\n//   // üî• NOVO: Gerar documentos\n//   function generateDocument(type) {\n//     if (!selected) {\n//       alert('Selecione um aluno primeiro');\n//       return;\n//     }\n\n//     setDocumentType(type);\n\n//     // Simular gera√ß√£o de documento\n//     const docContent = {\n//       declara√ß√£o: `Declara√ß√£o para ${selected.nome}`,\n//       boletim: `Boletim de ${selected.nome} - ${selected.serieAno}¬™ S√©rie ${selected.turma}`,\n//       historico: `Hist√≥rico Escolar de ${selected.nome}`\n//     };\n\n//     const content = docContent[type];\n\n//     // Criar e baixar documento\n//     const element = document.createElement('a');\n//     const file = new Blob([content], { type: 'text/plain' });\n//     element.href = URL.createObjectURL(file);\n//     element.download = `${type}_${selected.nome}.txt`;\n//     document.body.appendChild(element);\n//     element.click();\n//     document.body.removeChild(element);\n\n//     alert(`${type.charAt(0).toUpperCase() + type.slice(1)} gerado com sucesso!`);\n//   }\n\n//   // üî• NOVO: Pesquisas r√°pidas por s√©rie/turma\n//   function quickSearch(term) {\n//     setQ(term);\n//     setPage(1);\n//   }\n\n//   return (\n//     <div className=\"container\">\n//       <header>\n//         <div>\n//           <h1>GEA (Gerencimanento Educacional e Administrativo)</h1>\n//           <h2>E. E. F. NAIR CUNHA DE AGUIAR</h2>\n//         </div>\n//         <div className=\"controls\">\n//           <input \n//             placeholder=\"Buscar por: nome, CPF, s√©rie, turma, localidade...\" \n//             value={q} \n//             onChange={e => setQ(e.target.value)}\n//             onKeyPress={e => e.key === 'Enter' && handleSearch()}\n//           />\n//           <button onClick={handleSearch}>Buscar</button>\n\n//           <button \n//             onClick={startCreate}\n//             style={{ background: '#38a169', marginLeft: '8px' }}\n//           >\n//             + Novo Aluno\n//           </button>\n\n//           {q && (\n//             <button \n//               onClick={() => {\n//                 setQ('');\n//                 setPage(1);\n//               }}\n//               style={{ marginLeft: '8px', background: '#718096' }}\n//             >\n//               Limpar\n//             </button>\n//           )}\n//         </div>\n\n//         {/* üî• NOVO: Pesquisas r√°pidas */}\n//         <div className=\"quick-search\">\n//           <small>\n//             üîç <strong>Pesquisas r√°pidas:</strong>\n//             <button onClick={() => quickSearch('8 A')} className=\"quick-btn\">8¬∞ A</button>\n//             <button onClick={() => quickSearch('8 B')} className=\"quick-btn\">8¬∞ B</button>\n//             <button onClick={() => quickSearch('8')} className=\"quick-btn\">8¬∞ Ano</button>\n//             <button onClick={() => quickSearch('9 U')} className=\"quick-btn\">9¬∞ U</button>\n//             <button onClick={() => quickSearch('2 U')} className=\"quick-btn\">2¬∞ U</button>\n//           </small>\n//         </div>\n\n//         {!q && (\n//           <div className=\"search-tips\">\n//             <small>\n//               üí° <strong>Dicas:</strong> \n//               \"2\" (s√©rie) ‚Ä¢ \"A\" (turma) ‚Ä¢ \"09565384366\" (CPF) ‚Ä¢ \"Goiabeira\" (localidade) ‚Ä¢ \"Ana\" (nome) ‚Ä¢ \"8 A\" (s√©rie e turma)\n//             </small>\n//           </div>\n//         )}\n//       </header>\n\n//       {/* üî• DASHBOARDS COM PROPS CORRETAS */}\n//       <StatsDashboard \n//         seriesStats={seriesStats}\n//         allStudents={allStudents}\n//         dashboardLoading={dashboardLoading}\n//       />\n\n//       <LocalidadeDashboard \n//         localidadeStats={localidadeStats}\n//         seriesStats={seriesStats}\n//         allStudents={allStudents}\n//         dashboardLoading={dashboardLoading}\n//       />\n\n//       {/* üî• PAINEL DE DETALHES COMPLETO E CORRIGIDO */}\n//       <section className=\"detail-panel\">\n//         {selected ? (\n//           <div className=\"detail-content\">\n//             <h2>\n//               {creating ? 'Novo Aluno' : editing ? 'Editando Aluno' : 'Detalhes do Aluno'}\n//             </h2>\n\n//             {editing || creating ? (\n//               <div className=\"form\">\n//                 <label>\n//                   Nome:\n//                   <input \n//                     value={selected.nome || ''} \n//                     onChange={e => setSelected({...selected, nome: e.target.value})}\n//                   />\n//                 </label>\n//                 <label>\n//                   Data Nascimento:\n//                   <input \n//                     type=\"date\"\n//                     value={selected.dataNascimento ? new Date(selected.dataNascimento).toISOString().split('T')[0] : ''} \n//                     onChange={e => setSelected({...selected, dataNascimento: e.target.value})}\n//                   />\n//                 </label>\n//                 <label>\n//                   CPF:\n//                   <input \n//                     value={selected.cpf || ''} \n//                     onChange={e => setSelected({...selected, cpf: e.target.value})}\n//                   />\n//                 </label>\n//                 <label>\n//                   S√©rie/Ano:\n//                   <input \n//                     value={selected.serieAno || ''} \n//                     onChange={e => setSelected({...selected, serieAno: e.target.value})}\n//                   />\n//                 </label>\n//                 <label>\n//                   Turma:\n//                   <input \n//                     value={selected.turma || ''} \n//                     onChange={e => setSelected({...selected, turma: e.target.value})}\n//                   />\n//                 </label>\n//                 <label>\n//                   Localidade:\n//                   <input \n//                     value={selected.localidade || ''} \n//                     onChange={e => setSelected({...selected, localidade: e.target.value})}\n//                   />\n//                 </label>\n\n//                 <div className=\"actions\">\n//                   {creating ? (\n//                     <>\n//                       <button onClick={createNewStudent}>Criar Aluno</button>\n//                       <button onClick={cancelCreate}>Cancelar</button>\n//                     </>\n//                   ) : (\n//                     <>\n//                       <button onClick={save}>Salvar</button>\n//                       <button onClick={() => setEditing(false)}>Cancelar</button>\n//                     </>\n//                   )}\n//                 </div>\n//               </div>\n//             ) : (\n//               <div className=\"read\">\n//                 <div><strong>Nome:</strong> {selected.nome}</div>\n//                 <div><strong>Data Nasc.:</strong> {selected.dataNascimento ? new Date(selected.dataNascimento).toLocaleDateString('pt-BR') : ''}</div>\n//                 <div><strong>CPF:</strong> {selected.cpf}</div>\n//                 <div><strong>S√©rie/Ano:</strong> {selected.serieAno}</div>\n//                 <div><strong>Turma:</strong> {selected.turma}</div>\n//                 <div><strong>Localidade:</strong> {selected.localidade}</div>\n\n//                 {/* üî• NOVO: Bot√µes de documentos */}\n//                 <div className=\"document-actions\" style={{ margin: '15px 0', padding: '10px', background: '#f7fafc', borderRadius: '6px' }}>\n//                   <h4>üìÑ Gerar Documentos:</h4>\n//                   <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n//                     <button \n//                       onClick={() => generateDocument('declara√ß√£o')}\n//                       style={{ background: '#4299e1' }}\n//                     >\n//                       üìù Declara√ß√£o\n//                     </button>\n//                     <button \n//                       onClick={() => generateDocument('boletim')}\n//                       style={{ background: '#48bb78' }}\n//                     >\n//                       üìä Boletim\n//                     </button>\n//                     <button \n//                       onClick={() => generateDocument('historico')}\n//                       style={{ background: '#ed8936' }}\n//                     >\n//                       üìö Hist√≥rico\n//                     </button>\n//                   </div>\n//                 </div>\n\n//                 <div className=\"actions\">\n//                   <button onClick={() => setEditing(true)}>‚úèÔ∏è Editar</button>\n//                   <button onClick={() => remove(selected._id)} style={{background: '#e53e3e'}}>\n//                     üóëÔ∏è Excluir\n//                   </button>\n//                   <button onClick={() => setSelected(null)}>‚ùå Fechar</button>\n//                 </div>\n//               </div>\n//             )}\n//           </div>\n//         ) : (\n//           <div className=\"empty-detail\">\n//             {creating ? 'Preencha os dados do novo aluno' : 'Selecione um aluno para ver os detalhes'}\n//           </div>\n//         )}\n//       </section>\n\n//       <main>\n//         <section className=\"list\">\n//           <div className=\"meta\">\n//             <div>Total na busca: {total}</div>\n//             {q && <div>Filtro: \"{q}\"</div>}\n//             <div>\n//               P√°gina {page} de {totalPages} ‚Äî \n//               <button \n//                 disabled={page <= 1}\n//                 onClick={() => setPage(p => Math.max(1, p - 1))}\n//               >‚óÄ</button>\n//               <button \n//                 disabled={page >= totalPages}\n//                 onClick={() => setPage(p => p + 1)}\n//               >‚ñ∂</button>\n//             </div>\n//           </div>\n\n//           {loading ? (\n//             <div>Carregando...</div>\n//           ) : students.length === 0 ? (\n//             <div style={{ padding: '20px', textAlign: 'center', color: '#718096' }}>\n//               {q ? `Nenhum aluno encontrado para \"${q}\"` : 'Nenhum aluno cadastrado'}\n//             </div>\n//           ) : (\n//             <table>\n//               <thead>\n//                 <tr>\n//                   <th>Nome</th>\n//                   <th>Data Nasc.</th>\n//                   <th>CPF</th>\n//                   <th>S√©rie</th>\n//                   <th>Turma</th>\n//                   <th>Localidade</th>\n//                   <th></th>\n//                 </tr>\n//               </thead>\n//               <tbody>\n//                 {students.map(s => (\n//                   <tr key={s._id || s.cpf}>\n//                     <td>{s.nome}</td>\n//                     <td>{s.dataNascimento ? new Date(s.dataNascimento).toLocaleDateString('pt-BR') : ''}</td>\n//                     <td>{s.cpf}</td>\n//                     <td>{s.serieAno}</td>\n//                     <td>{s.turma}</td>\n//                     <td>{s.localidade}</td>\n//                     <td>\n//                       <button onClick={() => openDetail(s._id)}>Abrir</button>\n//                     </td>\n//                   </tr>\n//                 ))}\n//               </tbody>\n//             </table>\n//           )}\n//         </section>\n//       </main>\n\n//       <footer>\n//         <small>API: http://localhost:4000/api/students</small>\n//       </footer>\n//     </div>\n//   );\n// }","map":{"version":3,"names":[],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/App.jsx"],"sourcesContent":["// import React, { useEffect, useState, useCallback } from 'react';\r\n// import { fetchStudents, getStudent, updateStudent, deleteStudent, createStudent } from './api';\r\n\r\n// // üî• COMPONENTES MOVIDOS PARA FORA DO COMPONENTE App\r\n\r\n// // Componente do Dashboard de Estat√≠sticas\r\n// const StatsDashboard = ({ seriesStats, allStudents, dashboardLoading }) => {\r\n//   if (dashboardLoading) {\r\n//     return (\r\n//       <section className=\"stats-dashboard\">\r\n//         <h3>üìä Distribui√ß√£o por S√©rie/Turma</h3>\r\n//         <div className=\"stats-loading\">Carregando estat√≠sticas...</div>\r\n//       </section>\r\n//     );\r\n//   }\r\n\r\n//   if (Object.keys(seriesStats).length === 0 || !seriesStats.totalGeral) return null;\r\n  \r\n//   // Remover totalGeral das s√©ries para ordena√ß√£o\r\n//   const { totalGeral, ...seriesData } = seriesStats;\r\n\r\n//   // Ordenar s√©ries numericamente\r\n//   const sortedSeries = Object.keys(seriesData).sort((a, b) => {\r\n//     if (a === 'N√£o informada') return 1;\r\n//     if (b === 'N√£o informada') return -1;\r\n//     const numA = parseInt(a) || 0;\r\n//     const numB = parseInt(b) || 0;\r\n//     return numA - numB;\r\n//   });\r\n\r\n//   return (\r\n//     <section className=\"stats-dashboard\">\r\n//       <h3>üìä Distribui√ß√£o por S√©rie/Turma - Total: {totalGeral || allStudents.length} alunos</h3>\r\n//       <div className=\"stats-grid\">\r\n//         {sortedSeries.map(serie => (\r\n//           <div key={serie} className=\"stat-card\">\r\n//             <div className=\"stat-header\">\r\n//               <span className=\"stat-title\">\r\n//                 {serie === 'N√£o informada' ? '‚ùì' : 'üìö'} {serie}¬™ S√©rie\r\n//               </span>\r\n//               <span className=\"stat-total\">{seriesData[serie].count} alunos</span>\r\n//             </div>\r\n            \r\n//             <div className=\"stat-turmas\">\r\n//               {Object.entries(seriesData[serie].turmas)\r\n//                 .sort(([turmaA], [turmaB]) => turmaA.localeCompare(turmaB))\r\n//                 .map(([turma, count]) => (\r\n//                 <div key={turma} className=\"turma-item\">\r\n//                   <span className=\"turma-name\">\r\n//                     {turma === 'Sem turma' ? 'üè´ Geral' : `Turma ${turma}`}\r\n//                   </span>\r\n//                   <span className=\"turma-count\">{count}</span>\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n        \r\n//         {/* Card de total geral */}\r\n//         <div className=\"stat-card total-card\">\r\n//           <div className=\"stat-header\">\r\n//             <span className=\"stat-title\">üë• Total Geral</span>\r\n//             <span className=\"stat-total\">{totalGeral || allStudents.length} alunos</span>\r\n//           </div>\r\n//           <div className=\"stat-turmas\">\r\n//             <div className=\"turma-item\">\r\n//               <span className=\"turma-name\">Todas as s√©ries</span>\r\n//               <span className=\"turma-count\">{totalGeral || allStudents.length}</span>\r\n//             </div>\r\n//             <div className=\"turma-item\">\r\n//               <span className=\"turma-name\">S√©ries com dados</span>\r\n//               <span className=\"turma-count\">{sortedSeries.length}</span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </section>\r\n//   );\r\n// };\r\n\r\n// // Fun√ß√£o para obter √≠cones baseados na localidade\r\n// const getLocalidadeIcon = (localidade) => {\r\n//   const lowerLocalidade = localidade.toLowerCase();\r\n  \r\n//   if (lowerLocalidade.includes('goiabeira')) return 'üå≥';\r\n//   if (lowerLocalidade.includes('oiticica')) return 'üåø';\r\n//   if (lowerLocalidade.includes('centro')) return 'üè¢';\r\n//   if (lowerLocalidade.includes('vila')) return 'üèòÔ∏è';\r\n//   if (lowerLocalidade.includes('bairro')) return 'üè°';\r\n//   if (lowerLocalidade.includes('rural')) return 'üöú';\r\n//   if (lowerLocalidade.includes('multir√£o')) return 'üë•';\r\n//   if (lowerLocalidade.includes('n√£o informada')) return '‚ùì';\r\n  \r\n//   return 'üìç';\r\n// };\r\n\r\n// // Componente do Dashboard de Localidades\r\n// const LocalidadeDashboard = ({ localidadeStats, seriesStats, allStudents, dashboardLoading }) => {\r\n//   if (dashboardLoading) {\r\n//     return (\r\n//       <section className=\"stats-dashboard localidade-dashboard\">\r\n//         <h3>üèòÔ∏è Distribui√ß√£o por Localidade</h3>\r\n//         <div className=\"stats-loading\">Carregando estat√≠sticas por localidade...</div>\r\n//       </section>\r\n//     );\r\n//   }\r\n\r\n//   if (Object.keys(localidadeStats).length === 0) return null;\r\n    \r\n//   // Ordenar localidades por quantidade (maior primeiro)\r\n//   const sortedLocalidades = Object.keys(localidadeStats).sort((a, b) => {\r\n//     return localidadeStats[b].count - localidadeStats[a].count;\r\n//   });\r\n\r\n//   // Pegar as top localidades (m√°ximo 8 para n√£o ficar muito grande)\r\n//   const topLocalidades = sortedLocalidades.slice(0, 8);\r\n\r\n//   return (\r\n//     <section className=\"stats-dashboard localidade-dashboard\">\r\n//       <h3>üèòÔ∏è Distribui√ß√£o por Localidade</h3>\r\n//       <div className=\"stats-grid\">\r\n//         {topLocalidades.map(localidade => (\r\n//           <div key={localidade} className=\"stat-card localidade-card\">\r\n//             <div className=\"stat-header\">\r\n//               <span className=\"stat-title\">\r\n//                 {getLocalidadeIcon(localidade)} {localidade}\r\n//               </span>\r\n//               <span className=\"stat-total\">{localidadeStats[localidade].count} alunos</span>\r\n//             </div>\r\n            \r\n//             <div className=\"stat-turmas\">\r\n//               {Object.entries(localidadeStats[localidade].series)\r\n//                 .sort(([serieA], [serieB]) => {\r\n//                   if (serieA === 'N√£o informada') return 1;\r\n//                   if (serieB === 'N√£o informada') return -1;\r\n//                   const numA = parseInt(serieA) || 0;\r\n//                   const numB = parseInt(serieB) || 0;\r\n//                   return numA - numB;\r\n//                 })\r\n//                 .map(([serie, count]) => (\r\n//                 <div key={serie} className=\"turma-item\">\r\n//                   <span className=\"turma-name\">\r\n//                     {serie === 'N√£o informada' ? 'üìö Geral' : `${serie}¬™ S√©rie`}\r\n//                   </span>\r\n//                   <span className=\"turma-count\">{count}</span>\r\n//                 </div>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n        \r\n//         {/* Card de resumo das localidades */}\r\n//         <div className=\"stat-card total-card localidade-total\">\r\n//           <div className=\"stat-header\">\r\n//             <span className=\"stat-title\">üó∫Ô∏è Resumo Localidades</span>\r\n//             <span className=\"stat-total\">{sortedLocalidades.length} locais</span>\r\n//           </div>\r\n//           <div className=\"stat-turmas\">\r\n//             <div className=\"turma-item\">\r\n//               <span className=\"turma-name\">Total de alunos</span>\r\n//               <span className=\"turma-count\">{seriesStats.totalGeral || allStudents.length}</span>\r\n//             </div>\r\n//             <div className=\"turma-item\">\r\n//               <span className=\"turma-name\">Localidades com dados</span>\r\n//               <span className=\"turma-count\">{sortedLocalidades.length}</span>\r\n//             </div>\r\n//             <div className=\"turma-item\">\r\n//               <span className=\"turma-name\">Maior localidade</span>\r\n//               <span className=\"turma-count\">\r\n//                 {sortedLocalidades[0] ? `${localidadeStats[sortedLocalidades[0]].count} alunos` : '-'}\r\n//               </span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </section>\r\n//   );\r\n// };\r\n\r\n// // üî• COMPONENTE App PRINCIPAL CORRIGIDO\r\n// export default function App() {\r\n//   const [students, setStudents] = useState([]);\r\n//   const [allStudents, setAllStudents] = useState([]);\r\n//   const [q, setQ] = useState('');\r\n//   const [page, setPage] = useState(1);\r\n//   const [limit] = useState(50);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [selected, setSelected] = useState(null);\r\n//   const [editing, setEditing] = useState(false);\r\n//   const [creating, setCreating] = useState(false);\r\n//   const [total, setTotal] = useState(0);\r\n//   const [totalPages, setTotalPages] = useState(0);\r\n//   const [seriesStats, setSeriesStats] = useState({});\r\n//   const [localidadeStats, setLocalidadeStats] = useState({});\r\n//   const [dashboardLoading, setDashboardLoading] = useState(false);\r\n//   const [documentType, setDocumentType] = useState(''); // üî• NOVO: Tipo de documento para gerar\r\n\r\n//   // Aluno vazio para cria√ß√£o\r\n//   const emptyStudent = {\r\n//     nome: '',\r\n//     dataNascimento: '',\r\n//     cpf: '',\r\n//     cartaoSUS: '',\r\n//     serieAno: '',\r\n//     turma: '',\r\n//     turno: '',\r\n//     status: '',\r\n//     transporte: '',\r\n//     localidade: ''\r\n//   };\r\n\r\n//   // üî• NOVO: Carregar TODOS os alunos para o dashboard\r\n//   const loadAllStudents = async () => {\r\n//     setDashboardLoading(true);\r\n//     try {\r\n//       const resp = await fetchStudents({ page: 1, limit: 1000, q: '' });\r\n//       setAllStudents(resp.data || []);\r\n//     } catch (error) {\r\n//       console.error('Erro ao carregar dados do dashboard:', error);\r\n//     } finally {\r\n//       setDashboardLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // üî• ATUALIZADO: Carregar alunos com busca inteligente\r\n//   async function load(searchTerm = q) {\r\n//     setLoading(true);\r\n//     try {\r\n//       const resp = await fetchStudents({ page, limit, q: searchTerm });\r\n//       setStudents(resp.data || []);\r\n//       setTotal(resp.total || 0);\r\n//       setTotalPages(resp.totalPages || 0);\r\n//     } catch (error) {\r\n//       console.error('Erro ao carregar alunos:', error);\r\n//       alert('Erro ao carregar dados');\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   }\r\n\r\n//   // üî• ATUALIZADO: Calcular estat√≠sticas com TODOS os alunos\r\n//   useEffect(() => {\r\n//     if (allStudents.length > 0) {\r\n//       const statsSeries = {};\r\n//       const statsLocalidades = {};\r\n//       let totalGeral = 0;\r\n      \r\n//       allStudents.forEach(student => {\r\n//         const serie = student.serieAno?.toString().trim() || 'N√£o informada';\r\n//         const turma = student.turma?.toString().trim() || 'Sem turma';\r\n//         const localidade = student.localidade?.toString().trim() || 'N√£o informada';\r\n        \r\n//         totalGeral++;\r\n        \r\n//         // Estat√≠stica por s√©rie\r\n//         if (!statsSeries[serie]) {\r\n//           statsSeries[serie] = {\r\n//             count: 0,\r\n//             turmas: {}\r\n//           };\r\n//         }\r\n//         statsSeries[serie].count++;\r\n        \r\n//         if (!statsSeries[serie].turmas[turma]) {\r\n//           statsSeries[serie].turmas[turma] = 0;\r\n//         }\r\n//         statsSeries[serie].turmas[turma]++;\r\n        \r\n//         // üî• NOVO: Estat√≠stica por localidade\r\n//         if (!statsLocalidades[localidade]) {\r\n//           statsLocalidades[localidade] = {\r\n//             count: 0,\r\n//             series: {}\r\n//           };\r\n//         }\r\n//         statsLocalidades[localidade].count++;\r\n        \r\n//         // Estat√≠stica por s√©rie dentro da localidade\r\n//         if (!statsLocalidades[localidade].series[serie]) {\r\n//           statsLocalidades[localidade].series[serie] = 0;\r\n//         }\r\n//         statsLocalidades[localidade].series[serie]++;\r\n//       });\r\n      \r\n//       statsSeries.totalGeral = totalGeral;\r\n//       setSeriesStats(statsSeries);\r\n//       setLocalidadeStats(statsLocalidades);\r\n//     } else {\r\n//       setSeriesStats({});\r\n//       setLocalidadeStats({});\r\n//     }\r\n//   }, [allStudents]);\r\n\r\n//   // üî• NOVO: Carregar dados do dashboard na inicializa√ß√£o\r\n//   useEffect(() => {\r\n//     loadAllStudents();\r\n//     load();\r\n//   }, []);\r\n\r\n//   // Debounce para pesquisa\r\n//   const debouncedSearch = useCallback((searchTerm) => {\r\n//     const timer = setTimeout(() => {\r\n//       setPage(1);\r\n//       load(searchTerm);\r\n//     }, 500);\r\n//     return () => clearTimeout(timer);\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (q !== '') {\r\n//       debouncedSearch(q);\r\n//     } else {\r\n//       setPage(1);\r\n//       load();\r\n//     }\r\n//   }, [q, debouncedSearch]);\r\n\r\n//   // Recarregar quando mudar p√°gina\r\n//   useEffect(() => { \r\n//     if (q === '') {\r\n//       load();\r\n//     }\r\n//   }, [page]);\r\n\r\n//   // üî• ATUALIZADO: Recarregar dashboard ap√≥s criar/editar/excluir\r\n//   const handleStudentChange = () => {\r\n//     loadAllStudents();\r\n//     load();\r\n//   };\r\n\r\n//   // Busca manual\r\n//   function handleSearch() {\r\n//     setPage(1);\r\n//     load();\r\n//   }\r\n\r\n//   // üî• CORRIGIDO: Abrir detalhes do aluno\r\n//   async function openDetail(id) {\r\n//     try {\r\n//       console.log('üîç Buscando aluno ID:', id);\r\n//       const s = await getStudent(id);\r\n//       console.log('‚úÖ Aluno carregado:', s);\r\n//       setSelected(s);\r\n//       setEditing(false);\r\n//       setCreating(false);\r\n//       setDocumentType(''); // Resetar tipo de documento\r\n//     } catch (error) {\r\n//       console.error('‚ùå Erro ao carregar detalhes:', error);\r\n//       alert('Erro ao carregar detalhes do aluno: ' + error.message);\r\n//     }\r\n//   }\r\n\r\n//   // üî• CORRIGIDO: Salvar edi√ß√£o\r\n//   async function save() {\r\n//     if (!selected || !selected._id) {\r\n//       alert('Nenhum aluno selecionado para salvar');\r\n//       return;\r\n//     }\r\n//     try {\r\n//       console.log('üíæ Salvando aluno:', selected);\r\n//       const res = await updateStudent(selected._id, selected);\r\n//       setSelected(res);\r\n//       setEditing(false);\r\n//       handleStudentChange();\r\n//       alert('Aluno atualizado com sucesso!');\r\n//     } catch (error) {\r\n//       console.error('‚ùå Erro ao salvar:', error);\r\n//       alert('Erro ao salvar altera√ß√µes: ' + error.message);\r\n//     }\r\n//   }\r\n\r\n//   // üî• CORRIGIDO: Excluir aluno\r\n//   async function remove(id) {\r\n//     if (!id) {\r\n//       alert('ID do aluno n√£o encontrado');\r\n//       return;\r\n//     }\r\n    \r\n//     if (!window.confirm('Tem certeza que deseja excluir este aluno?')) return;\r\n    \r\n//     try {\r\n//       console.log('üóëÔ∏è Excluindo aluno ID:', id);\r\n//       await deleteStudent(id);\r\n//       setSelected(null);\r\n//       handleStudentChange();\r\n//       alert('Aluno exclu√≠do com sucesso!');\r\n//     } catch (error) {\r\n//       console.error('‚ùå Erro ao excluir:', error);\r\n//       alert('Erro ao excluir aluno: ' + error.message);\r\n//     }\r\n//   }\r\n\r\n//   // üî• CORRIGIDO: Criar novo aluno\r\n//   // üî• CORRIGIDO: Criar novo aluno com melhor tratamento de erro\r\n// async function createNewStudent() {\r\n//   if (!selected) {\r\n//     alert('Preencha os dados do aluno');\r\n//     return;\r\n//   }\r\n\r\n//   // Valida√ß√£o b√°sica no frontend\r\n//   if (!selected.nome || !selected.nome.trim()) {\r\n//     alert('Nome √© obrigat√≥rio');\r\n//     return;\r\n//   }\r\n\r\n//   try {\r\n//     console.log('‚ûï Criando novo aluno:', selected);\r\n    \r\n//     // Garantir que os dados estejam no formato correto\r\n//     const studentData = {\r\n//       ...selected,\r\n//       nome: selected.nome.trim(),\r\n//       dataNascimento: selected.dataNascimento || null,\r\n//       cpf: selected.cpf || '',\r\n//       serieAno: selected.serieAno || '',\r\n//       turma: selected.turma || '',\r\n//       localidade: selected.localidade || ''\r\n//     };\r\n\r\n//     const createdStudent = await createStudent(studentData);\r\n    \r\n//     alert('Aluno criado com sucesso!');\r\n//     setCreating(false);\r\n//     setSelected(null);\r\n//     handleStudentChange();\r\n    \r\n//   } catch (error) {\r\n//     console.error('‚ùå Erro ao criar aluno:', error);\r\n    \r\n//     // Mensagem de erro mais amig√°vel\r\n//     let errorMessage = 'Erro ao criar aluno';\r\n    \r\n//     if (error.message.includes('400')) {\r\n//       errorMessage = 'Dados inv√°lidos. Verifique os campos obrigat√≥rios.';\r\n//     } else if (error.message.includes('CPF j√° cadastrado')) {\r\n//       errorMessage = 'CPF j√° est√° cadastrado no sistema.';\r\n//     } else if (error.message.includes('NetworkError')) {\r\n//       errorMessage = 'Erro de conex√£o. Verifique se o servidor est√° rodando.';\r\n//     } else {\r\n//       errorMessage = error.message || 'Erro desconhecido ao criar aluno';\r\n//     }\r\n    \r\n//     alert(errorMessage);\r\n//   }\r\n// }\r\n//   // Iniciar cria√ß√£o\r\n//   function startCreate() {\r\n//     setSelected({...emptyStudent});\r\n//     setCreating(true);\r\n//     setEditing(false);\r\n//     setDocumentType('');\r\n//   }\r\n\r\n//   // Cancelar cria√ß√£o\r\n//   function cancelCreate() {\r\n//     setCreating(false);\r\n//     setSelected(null);\r\n//     setDocumentType('');\r\n//   }\r\n\r\n//   // üî• NOVO: Gerar documentos\r\n//   function generateDocument(type) {\r\n//     if (!selected) {\r\n//       alert('Selecione um aluno primeiro');\r\n//       return;\r\n//     }\r\n\r\n//     setDocumentType(type);\r\n    \r\n//     // Simular gera√ß√£o de documento\r\n//     const docContent = {\r\n//       declara√ß√£o: `Declara√ß√£o para ${selected.nome}`,\r\n//       boletim: `Boletim de ${selected.nome} - ${selected.serieAno}¬™ S√©rie ${selected.turma}`,\r\n//       historico: `Hist√≥rico Escolar de ${selected.nome}`\r\n//     };\r\n\r\n//     const content = docContent[type];\r\n    \r\n//     // Criar e baixar documento\r\n//     const element = document.createElement('a');\r\n//     const file = new Blob([content], { type: 'text/plain' });\r\n//     element.href = URL.createObjectURL(file);\r\n//     element.download = `${type}_${selected.nome}.txt`;\r\n//     document.body.appendChild(element);\r\n//     element.click();\r\n//     document.body.removeChild(element);\r\n    \r\n//     alert(`${type.charAt(0).toUpperCase() + type.slice(1)} gerado com sucesso!`);\r\n//   }\r\n\r\n//   // üî• NOVO: Pesquisas r√°pidas por s√©rie/turma\r\n//   function quickSearch(term) {\r\n//     setQ(term);\r\n//     setPage(1);\r\n//   }\r\n\r\n//   return (\r\n//     <div className=\"container\">\r\n//       <header>\r\n//         <div>\r\n//           <h1>GEA (Gerencimanento Educacional e Administrativo)</h1>\r\n//           <h2>E. E. F. NAIR CUNHA DE AGUIAR</h2>\r\n//         </div>\r\n//         <div className=\"controls\">\r\n//           <input \r\n//             placeholder=\"Buscar por: nome, CPF, s√©rie, turma, localidade...\" \r\n//             value={q} \r\n//             onChange={e => setQ(e.target.value)}\r\n//             onKeyPress={e => e.key === 'Enter' && handleSearch()}\r\n//           />\r\n//           <button onClick={handleSearch}>Buscar</button>\r\n          \r\n//           <button \r\n//             onClick={startCreate}\r\n//             style={{ background: '#38a169', marginLeft: '8px' }}\r\n//           >\r\n//             + Novo Aluno\r\n//           </button>\r\n          \r\n//           {q && (\r\n//             <button \r\n//               onClick={() => {\r\n//                 setQ('');\r\n//                 setPage(1);\r\n//               }}\r\n//               style={{ marginLeft: '8px', background: '#718096' }}\r\n//             >\r\n//               Limpar\r\n//             </button>\r\n//           )}\r\n//         </div>\r\n        \r\n//         {/* üî• NOVO: Pesquisas r√°pidas */}\r\n//         <div className=\"quick-search\">\r\n//           <small>\r\n//             üîç <strong>Pesquisas r√°pidas:</strong>\r\n//             <button onClick={() => quickSearch('8 A')} className=\"quick-btn\">8¬∞ A</button>\r\n//             <button onClick={() => quickSearch('8 B')} className=\"quick-btn\">8¬∞ B</button>\r\n//             <button onClick={() => quickSearch('8')} className=\"quick-btn\">8¬∞ Ano</button>\r\n//             <button onClick={() => quickSearch('9 U')} className=\"quick-btn\">9¬∞ U</button>\r\n//             <button onClick={() => quickSearch('2 U')} className=\"quick-btn\">2¬∞ U</button>\r\n//           </small>\r\n//         </div>\r\n\r\n//         {!q && (\r\n//           <div className=\"search-tips\">\r\n//             <small>\r\n//               üí° <strong>Dicas:</strong> \r\n//               \"2\" (s√©rie) ‚Ä¢ \"A\" (turma) ‚Ä¢ \"09565384366\" (CPF) ‚Ä¢ \"Goiabeira\" (localidade) ‚Ä¢ \"Ana\" (nome) ‚Ä¢ \"8 A\" (s√©rie e turma)\r\n//             </small>\r\n//           </div>\r\n//         )}\r\n//       </header>\r\n\r\n//       {/* üî• DASHBOARDS COM PROPS CORRETAS */}\r\n//       <StatsDashboard \r\n//         seriesStats={seriesStats}\r\n//         allStudents={allStudents}\r\n//         dashboardLoading={dashboardLoading}\r\n//       />\r\n\r\n//       <LocalidadeDashboard \r\n//         localidadeStats={localidadeStats}\r\n//         seriesStats={seriesStats}\r\n//         allStudents={allStudents}\r\n//         dashboardLoading={dashboardLoading}\r\n//       />\r\n\r\n//       {/* üî• PAINEL DE DETALHES COMPLETO E CORRIGIDO */}\r\n//       <section className=\"detail-panel\">\r\n//         {selected ? (\r\n//           <div className=\"detail-content\">\r\n//             <h2>\r\n//               {creating ? 'Novo Aluno' : editing ? 'Editando Aluno' : 'Detalhes do Aluno'}\r\n//             </h2>\r\n            \r\n//             {editing || creating ? (\r\n//               <div className=\"form\">\r\n//                 <label>\r\n//                   Nome:\r\n//                   <input \r\n//                     value={selected.nome || ''} \r\n//                     onChange={e => setSelected({...selected, nome: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n//                 <label>\r\n//                   Data Nascimento:\r\n//                   <input \r\n//                     type=\"date\"\r\n//                     value={selected.dataNascimento ? new Date(selected.dataNascimento).toISOString().split('T')[0] : ''} \r\n//                     onChange={e => setSelected({...selected, dataNascimento: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n//                 <label>\r\n//                   CPF:\r\n//                   <input \r\n//                     value={selected.cpf || ''} \r\n//                     onChange={e => setSelected({...selected, cpf: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n//                 <label>\r\n//                   S√©rie/Ano:\r\n//                   <input \r\n//                     value={selected.serieAno || ''} \r\n//                     onChange={e => setSelected({...selected, serieAno: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n//                 <label>\r\n//                   Turma:\r\n//                   <input \r\n//                     value={selected.turma || ''} \r\n//                     onChange={e => setSelected({...selected, turma: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n//                 <label>\r\n//                   Localidade:\r\n//                   <input \r\n//                     value={selected.localidade || ''} \r\n//                     onChange={e => setSelected({...selected, localidade: e.target.value})}\r\n//                   />\r\n//                 </label>\r\n                \r\n//                 <div className=\"actions\">\r\n//                   {creating ? (\r\n//                     <>\r\n//                       <button onClick={createNewStudent}>Criar Aluno</button>\r\n//                       <button onClick={cancelCreate}>Cancelar</button>\r\n//                     </>\r\n//                   ) : (\r\n//                     <>\r\n//                       <button onClick={save}>Salvar</button>\r\n//                       <button onClick={() => setEditing(false)}>Cancelar</button>\r\n//                     </>\r\n//                   )}\r\n//                 </div>\r\n//               </div>\r\n//             ) : (\r\n//               <div className=\"read\">\r\n//                 <div><strong>Nome:</strong> {selected.nome}</div>\r\n//                 <div><strong>Data Nasc.:</strong> {selected.dataNascimento ? new Date(selected.dataNascimento).toLocaleDateString('pt-BR') : ''}</div>\r\n//                 <div><strong>CPF:</strong> {selected.cpf}</div>\r\n//                 <div><strong>S√©rie/Ano:</strong> {selected.serieAno}</div>\r\n//                 <div><strong>Turma:</strong> {selected.turma}</div>\r\n//                 <div><strong>Localidade:</strong> {selected.localidade}</div>\r\n                \r\n//                 {/* üî• NOVO: Bot√µes de documentos */}\r\n//                 <div className=\"document-actions\" style={{ margin: '15px 0', padding: '10px', background: '#f7fafc', borderRadius: '6px' }}>\r\n//                   <h4>üìÑ Gerar Documentos:</h4>\r\n//                   <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n//                     <button \r\n//                       onClick={() => generateDocument('declara√ß√£o')}\r\n//                       style={{ background: '#4299e1' }}\r\n//                     >\r\n//                       üìù Declara√ß√£o\r\n//                     </button>\r\n//                     <button \r\n//                       onClick={() => generateDocument('boletim')}\r\n//                       style={{ background: '#48bb78' }}\r\n//                     >\r\n//                       üìä Boletim\r\n//                     </button>\r\n//                     <button \r\n//                       onClick={() => generateDocument('historico')}\r\n//                       style={{ background: '#ed8936' }}\r\n//                     >\r\n//                       üìö Hist√≥rico\r\n//                     </button>\r\n//                   </div>\r\n//                 </div>\r\n                \r\n//                 <div className=\"actions\">\r\n//                   <button onClick={() => setEditing(true)}>‚úèÔ∏è Editar</button>\r\n//                   <button onClick={() => remove(selected._id)} style={{background: '#e53e3e'}}>\r\n//                     üóëÔ∏è Excluir\r\n//                   </button>\r\n//                   <button onClick={() => setSelected(null)}>‚ùå Fechar</button>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n//           </div>\r\n//         ) : (\r\n//           <div className=\"empty-detail\">\r\n//             {creating ? 'Preencha os dados do novo aluno' : 'Selecione um aluno para ver os detalhes'}\r\n//           </div>\r\n//         )}\r\n//       </section>\r\n\r\n//       <main>\r\n//         <section className=\"list\">\r\n//           <div className=\"meta\">\r\n//             <div>Total na busca: {total}</div>\r\n//             {q && <div>Filtro: \"{q}\"</div>}\r\n//             <div>\r\n//               P√°gina {page} de {totalPages} ‚Äî \r\n//               <button \r\n//                 disabled={page <= 1}\r\n//                 onClick={() => setPage(p => Math.max(1, p - 1))}\r\n//               >‚óÄ</button>\r\n//               <button \r\n//                 disabled={page >= totalPages}\r\n//                 onClick={() => setPage(p => p + 1)}\r\n//               >‚ñ∂</button>\r\n//             </div>\r\n//           </div>\r\n\r\n//           {loading ? (\r\n//             <div>Carregando...</div>\r\n//           ) : students.length === 0 ? (\r\n//             <div style={{ padding: '20px', textAlign: 'center', color: '#718096' }}>\r\n//               {q ? `Nenhum aluno encontrado para \"${q}\"` : 'Nenhum aluno cadastrado'}\r\n//             </div>\r\n//           ) : (\r\n//             <table>\r\n//               <thead>\r\n//                 <tr>\r\n//                   <th>Nome</th>\r\n//                   <th>Data Nasc.</th>\r\n//                   <th>CPF</th>\r\n//                   <th>S√©rie</th>\r\n//                   <th>Turma</th>\r\n//                   <th>Localidade</th>\r\n//                   <th></th>\r\n//                 </tr>\r\n//               </thead>\r\n//               <tbody>\r\n//                 {students.map(s => (\r\n//                   <tr key={s._id || s.cpf}>\r\n//                     <td>{s.nome}</td>\r\n//                     <td>{s.dataNascimento ? new Date(s.dataNascimento).toLocaleDateString('pt-BR') : ''}</td>\r\n//                     <td>{s.cpf}</td>\r\n//                     <td>{s.serieAno}</td>\r\n//                     <td>{s.turma}</td>\r\n//                     <td>{s.localidade}</td>\r\n//                     <td>\r\n//                       <button onClick={() => openDetail(s._id)}>Abrir</button>\r\n//                     </td>\r\n//                   </tr>\r\n//                 ))}\r\n//               </tbody>\r\n//             </table>\r\n//           )}\r\n//         </section>\r\n//       </main>\r\n\r\n//       <footer>\r\n//         <small>API: http://localhost:4000/api/students</small>\r\n//       </footer>\r\n//     </div>\r\n//   );\r\n// }"],"mappings":"AAAA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}