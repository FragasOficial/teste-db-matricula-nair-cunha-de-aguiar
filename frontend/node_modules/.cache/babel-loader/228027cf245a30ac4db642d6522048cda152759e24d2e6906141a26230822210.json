{"ast":null,"code":"const express = require('express');\nconst mongoose = require('mongoose');\nconst cors = require('cors');\nconst app = express();\napp.use(cors());\napp.use(express.json());\n\n// Conectar ao MongoDB\nmongoose.connect('mongodb://localhost:27017/escola', {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n});\n\n// Schema do Aluno\nconst alunoSchema = new mongoose.Schema({\n  nome: String,\n  dataNascimento: Date,\n  cpf: String,\n  cartaoSUS: String,\n  nomeMae: String,\n  nomePai: String,\n  serieAno: String,\n  turma: String,\n  turno: String,\n  status: String,\n  transporte: String,\n  localidade: String\n});\nconst Aluno = mongoose.model('Aluno', alunoSchema);\n\n// Rota para importar dados\napp.post('/api/importar-alunos', async (req, res) => {\n  try {\n    const alunosData = req.body;\n\n    // Limpar dados vazios e formatar\n    const alunosFormatados = alunosData.filter(aluno => aluno['Nome do Aluno'] && aluno['Nome do Aluno'].trim() !== '').map(aluno => ({\n      nome: aluno['Nome do Aluno'],\n      dataNascimento: new Date(aluno['Data de Nasc.']),\n      cpf: aluno['CPF'] || '',\n      cartaoSUS: aluno['Cartão do SUS'] || '',\n      nomeMae: aluno['Nome Mãe'] || '',\n      nomePai: aluno['Nome Pai'] || '',\n      serieAno: aluno['Série/Ano'],\n      turma: aluno['Turma'],\n      turno: aluno['Turno'],\n      status: aluno['Status'],\n      transporte: aluno['Transporte'],\n      localidade: aluno['Localidade']\n    }));\n\n    // Inserir no MongoDB\n    const resultado = await Aluno.insertMany(alunosFormatados);\n    res.json({\n      success: true,\n      message: `${resultado.length} alunos importados com sucesso!`,\n      data: resultado\n    });\n  } catch (error) {\n    console.error('Erro ao importar alunos:', error);\n    res.status(500).json({\n      success: false,\n      message: 'Erro ao importar alunos',\n      error: error.message\n    });\n  }\n});\n\n// Rota para listar alunos (para teste)\napp.get('/api/alunos', async (req, res) => {\n  try {\n    const alunos = await Aluno.find();\n    res.json(alunos);\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nconst PORT = process.env.PORT || 5000;\napp.listen(PORT, () => {\n  console.log(`Servidor rodando na porta ${PORT}`);\n});","map":{"version":3,"names":["express","require","mongoose","cors","app","use","json","connect","useNewUrlParser","useUnifiedTopology","alunoSchema","Schema","nome","String","dataNascimento","Date","cpf","cartaoSUS","nomeMae","nomePai","serieAno","turma","turno","status","transporte","localidade","Aluno","model","post","req","res","alunosData","body","alunosFormatados","filter","aluno","trim","map","resultado","insertMany","success","message","length","data","error","console","get","alunos","find","PORT","process","env","listen","log"],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/index.js"],"sourcesContent":["const express = require('express');\r\nconst mongoose = require('mongoose');\r\nconst cors = require('cors');\r\n\r\nconst app = express();\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\n// Conectar ao MongoDB\r\nmongoose.connect('mongodb://localhost:27017/escola', {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n});\r\n\r\n// Schema do Aluno\r\nconst alunoSchema = new mongoose.Schema({\r\n  nome: String,\r\n  dataNascimento: Date,\r\n  cpf: String,\r\n  cartaoSUS: String,\r\n  nomeMae: String,\r\n  nomePai: String,\r\n  serieAno: String,\r\n  turma: String,\r\n  turno: String,\r\n  status: String,\r\n  transporte: String,\r\n  localidade: String\r\n});\r\n\r\nconst Aluno = mongoose.model('Aluno', alunoSchema);\r\n\r\n// Rota para importar dados\r\napp.post('/api/importar-alunos', async (req, res) => {\r\n  try {\r\n    const alunosData = req.body;\r\n    \r\n    // Limpar dados vazios e formatar\r\n    const alunosFormatados = alunosData\r\n      .filter(aluno => aluno['Nome do Aluno'] && aluno['Nome do Aluno'].trim() !== '')\r\n      .map(aluno => ({\r\n        nome: aluno['Nome do Aluno'],\r\n        dataNascimento: new Date(aluno['Data de Nasc.']),\r\n        cpf: aluno['CPF'] || '',\r\n        cartaoSUS: aluno['Cartão do SUS'] || '',\r\n        nomeMae: aluno['Nome Mãe'] || '',\r\n        nomePai: aluno['Nome Pai'] || '',\r\n        serieAno: aluno['Série/Ano'],\r\n        turma: aluno['Turma'],\r\n        turno: aluno['Turno'],\r\n        status: aluno['Status'],\r\n        transporte: aluno['Transporte'],\r\n        localidade: aluno['Localidade']\r\n      }));\r\n\r\n    // Inserir no MongoDB\r\n    const resultado = await Aluno.insertMany(alunosFormatados);\r\n    \r\n    res.json({\r\n      success: true,\r\n      message: `${resultado.length} alunos importados com sucesso!`,\r\n      data: resultado\r\n    });\r\n  } catch (error) {\r\n    console.error('Erro ao importar alunos:', error);\r\n    res.status(500).json({\r\n      success: false,\r\n      message: 'Erro ao importar alunos',\r\n      error: error.message\r\n    });\r\n  }\r\n});\r\n\r\n// Rota para listar alunos (para teste)\r\napp.get('/api/alunos', async (req, res) => {\r\n  try {\r\n    const alunos = await Aluno.find();\r\n    res.json(alunos);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nconst PORT = process.env.PORT || 5000;\r\napp.listen(PORT, () => {\r\n  console.log(`Servidor rodando na porta ${PORT}`);\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}