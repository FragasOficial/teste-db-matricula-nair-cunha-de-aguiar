{"ast":null,"code":"// api.js - VERS√ÉO CORRIGIDA\nconst API = '/api';\nexport async function fetchStudents({\n  page = 1,\n  limit = 50,\n  q = ''\n} = {}) {\n  try {\n    const url = new URL(`${API}/students`, window.location.origin);\n    url.searchParams.set('page', page);\n    url.searchParams.set('limit', limit);\n    if (q) url.searchParams.set('q', q);\n    console.log('üîç Buscando:', url.toString());\n    const res = await fetch(url);\n    if (!res.ok) throw new Error(`Erro: ${res.status}`);\n    const data = await res.json();\n    console.log('‚úÖ Dados recebidos:', data);\n    return data;\n  } catch (error) {\n    console.error('‚ùå Erro:', error);\n    throw error;\n  }\n}\nexport async function getStudent(id) {\n  try {\n    const res = await fetch(`${API}/students/${id}`);\n    if (!res.ok) throw new Error(`Erro ${res.status}: ${await res.text()}`);\n    return res.json();\n  } catch (error) {\n    console.error('‚ùå Erro ao buscar aluno:', error);\n    throw error;\n  }\n}\n\n// üî• CORRE√á√ÉO: Fun√ß√£o createStudent corrigida\n// Na fun√ß√£o createStudent, atualize o body para incluir os novos campos:\nexport async function createStudent(body) {\n  try {\n    console.log('‚ûï Criando aluno:', body);\n    const res = await fetch(`${API}/students`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        ...body,\n        nomeMae: body.nomeMae || '',\n        nomePai: body.nomePai || '',\n        status: body.status || 'Matriculado'\n      })\n    });\n    // ... resto do c√≥digo\n  } catch (error) {\n    // ... tratamento de erro\n  }\n}\nexport async function updateStudent(id, body) {\n  try {\n    const res = await fetch(`${API}/students/${id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    if (!res.ok) {\n      const errorText = await res.text();\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao atualizar aluno'}`);\n    }\n    return res.json();\n  } catch (error) {\n    console.error('‚ùå Erro ao atualizar aluno:', error);\n    throw error;\n  }\n}\nexport async function deleteStudent(id) {\n  try {\n    const res = await fetch(`${API}/students/${id}`, {\n      method: 'DELETE'\n    });\n    if (!res.ok) {\n      const errorText = await res.text();\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao excluir aluno'}`);\n    }\n    return res.json();\n  } catch (error) {\n    console.error('‚ùå Erro ao excluir aluno:', error);\n    throw error;\n  }\n}","map":{"version":3,"names":["API","fetchStudents","page","limit","q","url","URL","window","location","origin","searchParams","set","console","log","toString","res","fetch","ok","Error","status","data","json","error","getStudent","id","text","createStudent","body","method","headers","JSON","stringify","nomeMae","nomePai","updateStudent","errorText","deleteStudent"],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/api.js"],"sourcesContent":["// api.js - VERS√ÉO CORRIGIDA\r\nconst API = '/api';\r\n\r\nexport async function fetchStudents({ page = 1, limit = 50, q = '' } = {}) {\r\n  try {\r\n    const url = new URL(`${API}/students`, window.location.origin);\r\n    url.searchParams.set('page', page);\r\n    url.searchParams.set('limit', limit);\r\n    if (q) url.searchParams.set('q', q);\r\n    \r\n    console.log('üîç Buscando:', url.toString());\r\n    const res = await fetch(url);\r\n    \r\n    if (!res.ok) throw new Error(`Erro: ${res.status}`);\r\n    \r\n    const data = await res.json();\r\n    console.log('‚úÖ Dados recebidos:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('‚ùå Erro:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getStudent(id) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`);\r\n    if (!res.ok) throw new Error(`Erro ${res.status}: ${await res.text()}`);\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao buscar aluno:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// üî• CORRE√á√ÉO: Fun√ß√£o createStudent corrigida\r\n// Na fun√ß√£o createStudent, atualize o body para incluir os novos campos:\r\nexport async function createStudent(body) {\r\n  try {\r\n    console.log('‚ûï Criando aluno:', body);\r\n    \r\n    const res = await fetch(`${API}/students`, { \r\n      method: 'POST', \r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }, \r\n      body: JSON.stringify({\r\n        ...body,\r\n        nomeMae: body.nomeMae || '',\r\n        nomePai: body.nomePai || '',\r\n        status: body.status || 'Matriculado'\r\n      }) \r\n    });\r\n    // ... resto do c√≥digo\r\n  } catch (error) {\r\n    // ... tratamento de erro\r\n  }\r\n}\r\nexport async function updateStudent(id, body) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`, { \r\n      method: 'PUT', \r\n      headers: {'Content-Type': 'application/json'}, \r\n      body: JSON.stringify(body) \r\n    });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao atualizar aluno'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao atualizar aluno:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function deleteStudent(id) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`, { method: 'DELETE' });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao excluir aluno'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao excluir aluno:', error);\r\n    throw error;\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}