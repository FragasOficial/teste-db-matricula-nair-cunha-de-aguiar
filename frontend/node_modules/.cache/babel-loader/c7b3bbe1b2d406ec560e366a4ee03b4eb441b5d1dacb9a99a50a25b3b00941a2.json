{"ast":null,"code":"import _objectSpread from\"C:/Users/Aluno LEI/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// api.js - VERS√ÉO CORRIGIDA\nconst API='/api';export async function fetchStudents(){let{page=1,limit=50,q=''}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{const url=new URL(\"\".concat(API,\"/students\"),window.location.origin);url.searchParams.set('page',page);url.searchParams.set('limit',limit);if(q)url.searchParams.set('q',q);console.log('üîç Buscando:',url.toString());const res=await fetch(url);if(!res.ok)throw new Error(\"Erro: \".concat(res.status));const data=await res.json();console.log('‚úÖ Dados recebidos:',data);return data;}catch(error){console.error('‚ùå Erro:',error);throw error;}}// üî• FUN√á√ïES PARA HIST√ìRICO\nexport async function getHistoricoAluno(id){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id,\"/historico\"));if(!res.ok)throw new Error(\"Erro \".concat(res.status,\": \").concat(await res.text()));return res.json();}catch(error){console.error('‚ùå Erro ao buscar hist√≥rico:',error);throw error;}}// No frontend, antes de fazer o POST\nconsole.log('üì§ Dados sendo enviados para o backend:',dadosAluno);// E verifique a resposta\nfetch('/api/students',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(dadosAluno)}).then(response=>{console.log('üì• Resposta do servidor:',response);return response.json();}).then(data=>{console.log('üìã Dados da resposta:',data);}).catch(error=>{console.error('‚ùå Erro na requisi√ß√£o:',error);});export async function addHistoricoAluno(id,historicoData){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id,\"/historico\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(historicoData)});if(!res.ok){const errorText=await res.text();throw new Error(\"Erro \".concat(res.status,\": \").concat(errorText||'Erro ao adicionar hist√≥rico'));}return res.json();}catch(error){console.error('‚ùå Erro ao adicionar hist√≥rico:',error);throw error;}}export async function deleteHistoricoAluno(id,historicoId){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id,\"/historico/\").concat(historicoId),{method:'DELETE'});if(!res.ok){const errorText=await res.text();throw new Error(\"Erro \".concat(res.status,\": \").concat(errorText||'Erro ao excluir hist√≥rico'));}return res.json();}catch(error){console.error('‚ùå Erro ao excluir hist√≥rico:',error);throw error;}}export async function getStudent(id){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id));if(!res.ok)throw new Error(\"Erro \".concat(res.status,\": \").concat(await res.text()));return res.json();}catch(error){console.error('‚ùå Erro ao buscar aluno:',error);throw error;}}// üî• CORRE√á√ÉO: Fun√ß√£o createStudent corrigida\n// Na fun√ß√£o createStudent, atualize o body para incluir os novos campos:\nexport async function createStudent(body){try{console.log('‚ûï Criando aluno:',body);const res=await fetch(\"\".concat(API,\"/students\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},body),{},{nomeMae:body.nomeMae||'',nomePai:body.nomePai||'',status:body.status||'Matriculado'}))});// ... resto do c√≥digo\n}catch(error){// ... tratamento de erro\n}}export async function updateStudent(id,body){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});if(!res.ok){const errorText=await res.text();throw new Error(\"Erro \".concat(res.status,\": \").concat(errorText||'Erro ao atualizar aluno'));}return res.json();}catch(error){console.error('‚ùå Erro ao atualizar aluno:',error);throw error;}}export async function deleteStudent(id){try{const res=await fetch(\"\".concat(API,\"/students/\").concat(id),{method:'DELETE'});if(!res.ok){const errorText=await res.text();throw new Error(\"Erro \".concat(res.status,\": \").concat(errorText||'Erro ao excluir aluno'));}return res.json();}catch(error){console.error('‚ùå Erro ao excluir aluno:',error);throw error;}}","map":{"version":3,"names":["API","fetchStudents","page","limit","q","arguments","length","undefined","url","URL","concat","window","location","origin","searchParams","set","console","log","toString","res","fetch","ok","Error","status","data","json","error","getHistoricoAluno","id","text","dadosAluno","method","headers","body","JSON","stringify","then","response","catch","addHistoricoAluno","historicoData","errorText","deleteHistoricoAluno","historicoId","getStudent","createStudent","_objectSpread","nomeMae","nomePai","updateStudent","deleteStudent"],"sources":["D:/Documents/db-nair-cunha/teste-db-matricula-nair-cunha-de-aguiar/frontend/src/api.js"],"sourcesContent":["// api.js - VERS√ÉO CORRIGIDA\r\nconst API = '/api';\r\n\r\nexport async function fetchStudents({ page = 1, limit = 50, q = '' } = {}) {\r\n  try {\r\n    const url = new URL(`${API}/students`, window.location.origin);\r\n    url.searchParams.set('page', page);\r\n    url.searchParams.set('limit', limit);\r\n    if (q) url.searchParams.set('q', q);\r\n    \r\n    console.log('üîç Buscando:', url.toString());\r\n    const res = await fetch(url);\r\n    \r\n    if (!res.ok) throw new Error(`Erro: ${res.status}`);\r\n    \r\n    const data = await res.json();\r\n    console.log('‚úÖ Dados recebidos:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('‚ùå Erro:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// üî• FUN√á√ïES PARA HIST√ìRICO\r\nexport async function getHistoricoAluno(id) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}/historico`);\r\n    if (!res.ok) throw new Error(`Erro ${res.status}: ${await res.text()}`);\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao buscar hist√≥rico:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// No frontend, antes de fazer o POST\r\nconsole.log('üì§ Dados sendo enviados para o backend:', dadosAluno);\r\n\r\n// E verifique a resposta\r\nfetch('/api/students', {\r\n  method: 'POST',\r\n  headers: { 'Content-Type': 'application/json' },\r\n  body: JSON.stringify(dadosAluno)\r\n})\r\n.then(response => {\r\n  console.log('üì• Resposta do servidor:', response);\r\n  return response.json();\r\n})\r\n.then(data => {\r\n  console.log('üìã Dados da resposta:', data);\r\n})\r\n.catch(error => {\r\n  console.error('‚ùå Erro na requisi√ß√£o:', error);\r\n});\r\n\r\nexport async function addHistoricoAluno(id, historicoData) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}/historico`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(historicoData)\r\n    });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao adicionar hist√≥rico'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao adicionar hist√≥rico:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function deleteHistoricoAluno(id, historicoId) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}/historico/${historicoId}`, {\r\n      method: 'DELETE'\r\n    });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao excluir hist√≥rico'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao excluir hist√≥rico:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getStudent(id) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`);\r\n    if (!res.ok) throw new Error(`Erro ${res.status}: ${await res.text()}`);\r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao buscar aluno:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// üî• CORRE√á√ÉO: Fun√ß√£o createStudent corrigida\r\n// Na fun√ß√£o createStudent, atualize o body para incluir os novos campos:\r\nexport async function createStudent(body) {\r\n  try {\r\n    console.log('‚ûï Criando aluno:', body);\r\n    \r\n    const res = await fetch(`${API}/students`, { \r\n      method: 'POST', \r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }, \r\n      body: JSON.stringify({\r\n        ...body,\r\n        nomeMae: body.nomeMae || '',\r\n        nomePai: body.nomePai || '',\r\n        status: body.status || 'Matriculado'\r\n      }) \r\n    });\r\n    // ... resto do c√≥digo\r\n  } catch (error) {\r\n    // ... tratamento de erro\r\n  }\r\n}\r\nexport async function updateStudent(id, body) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`, { \r\n      method: 'PUT', \r\n      headers: {'Content-Type': 'application/json'}, \r\n      body: JSON.stringify(body) \r\n    });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao atualizar aluno'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao atualizar aluno:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function deleteStudent(id) {\r\n  try {\r\n    const res = await fetch(`${API}/students/${id}`, { method: 'DELETE' });\r\n    \r\n    if (!res.ok) {\r\n      const errorText = await res.text();\r\n      throw new Error(`Erro ${res.status}: ${errorText || 'Erro ao excluir aluno'}`);\r\n    }\r\n    \r\n    return res.json();\r\n  } catch (error) {\r\n    console.error('‚ùå Erro ao excluir aluno:', error);\r\n    throw error;\r\n  }\r\n}"],"mappings":"sJAAA;AACA,KAAM,CAAAA,GAAG,CAAG,MAAM,CAElB,MAAO,eAAe,CAAAC,aAAaA,CAAA,CAAwC,IAAvC,CAAEC,IAAI,CAAG,CAAC,CAAEC,KAAK,CAAG,EAAE,CAAEC,CAAC,CAAG,EAAG,CAAC,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAAC,CACvE,GAAI,CACF,KAAM,CAAAG,GAAG,CAAG,GAAI,CAAAC,GAAG,IAAAC,MAAA,CAAIV,GAAG,cAAaW,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAC9DL,GAAG,CAACM,YAAY,CAACC,GAAG,CAAC,MAAM,CAAEb,IAAI,CAAC,CAClCM,GAAG,CAACM,YAAY,CAACC,GAAG,CAAC,OAAO,CAAEZ,KAAK,CAAC,CACpC,GAAIC,CAAC,CAAEI,GAAG,CAACM,YAAY,CAACC,GAAG,CAAC,GAAG,CAAEX,CAAC,CAAC,CAEnCY,OAAO,CAACC,GAAG,CAAC,cAAc,CAAET,GAAG,CAACU,QAAQ,CAAC,CAAC,CAAC,CAC3C,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAACZ,GAAG,CAAC,CAE5B,GAAI,CAACW,GAAG,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,UAAAZ,MAAA,CAAUS,GAAG,CAACI,MAAM,CAAE,CAAC,CAEnD,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAL,GAAG,CAACM,IAAI,CAAC,CAAC,CAC7BT,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEO,IAAI,CAAC,CACvC,MAAO,CAAAA,IAAI,CACb,CAAE,MAAOE,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/B,KAAM,CAAAA,KAAK,CACb,CACF,CAEA;AACA,MAAO,eAAe,CAAAC,iBAAiBA,CAACC,EAAE,CAAE,CAC1C,GAAI,CACF,KAAM,CAAAT,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,cAAY,CAAC,CAC1D,GAAI,CAACT,GAAG,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK,KAAM,CAAAS,GAAG,CAACU,IAAI,CAAC,CAAC,CAAE,CAAC,CACvE,MAAO,CAAAV,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnD,KAAM,CAAAA,KAAK,CACb,CACF,CAEA;AACAV,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAEa,UAAU,CAAC,CAElE;AACAV,KAAK,CAAC,eAAe,CAAE,CACrBW,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACL,UAAU,CACjC,CAAC,CAAC,CACDM,IAAI,CAACC,QAAQ,EAAI,CAChBrB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEoB,QAAQ,CAAC,CACjD,MAAO,CAAAA,QAAQ,CAACZ,IAAI,CAAC,CAAC,CACxB,CAAC,CAAC,CACDW,IAAI,CAACZ,IAAI,EAAI,CACZR,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEO,IAAI,CAAC,CAC5C,CAAC,CAAC,CACDc,KAAK,CAACZ,KAAK,EAAI,CACdV,OAAO,CAACU,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC/C,CAAC,CAAC,CAEF,MAAO,eAAe,CAAAa,iBAAiBA,CAACX,EAAE,CAAEY,aAAa,CAAE,CACzD,GAAI,CACF,KAAM,CAAArB,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,eAAc,CACzDG,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACK,aAAa,CACpC,CAAC,CAAC,CAEF,GAAI,CAACrB,GAAG,CAACE,EAAE,CAAE,CACX,KAAM,CAAAoB,SAAS,CAAG,KAAM,CAAAtB,GAAG,CAACU,IAAI,CAAC,CAAC,CAClC,KAAM,IAAI,CAAAP,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK+B,SAAS,EAAI,6BAA6B,CAAE,CAAC,CACtF,CAEA,MAAO,CAAAtB,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtD,KAAM,CAAAA,KAAK,CACb,CACF,CAEA,MAAO,eAAe,CAAAgB,oBAAoBA,CAACd,EAAE,CAAEe,WAAW,CAAE,CAC1D,GAAI,CACF,KAAM,CAAAxB,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,gBAAAlB,MAAA,CAAciC,WAAW,EAAI,CACxEZ,MAAM,CAAE,QACV,CAAC,CAAC,CAEF,GAAI,CAACZ,GAAG,CAACE,EAAE,CAAE,CACX,KAAM,CAAAoB,SAAS,CAAG,KAAM,CAAAtB,GAAG,CAACU,IAAI,CAAC,CAAC,CAClC,KAAM,IAAI,CAAAP,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK+B,SAAS,EAAI,2BAA2B,CAAE,CAAC,CACpF,CAEA,MAAO,CAAAtB,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACpD,KAAM,CAAAA,KAAK,CACb,CACF,CAEA,MAAO,eAAe,CAAAkB,UAAUA,CAAChB,EAAE,CAAE,CACnC,GAAI,CACF,KAAM,CAAAT,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,CAAE,CAAC,CAChD,GAAI,CAACT,GAAG,CAACE,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK,KAAM,CAAAS,GAAG,CAACU,IAAI,CAAC,CAAC,CAAE,CAAC,CACvE,MAAO,CAAAV,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,KAAM,CAAAA,KAAK,CACb,CACF,CAEA;AACA;AACA,MAAO,eAAe,CAAAmB,aAAaA,CAACZ,IAAI,CAAE,CACxC,GAAI,CACFjB,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEgB,IAAI,CAAC,CAErC,KAAM,CAAAd,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,cAAa,CACzC+B,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAAW,aAAA,CAAAA,aAAA,IACfb,IAAI,MACPc,OAAO,CAAEd,IAAI,CAACc,OAAO,EAAI,EAAE,CAC3BC,OAAO,CAAEf,IAAI,CAACe,OAAO,EAAI,EAAE,CAC3BzB,MAAM,CAAEU,IAAI,CAACV,MAAM,EAAI,aAAa,EACrC,CACH,CAAC,CAAC,CACF;AACF,CAAE,MAAOG,KAAK,CAAE,CACd;AAAA,CAEJ,CACA,MAAO,eAAe,CAAAuB,aAAaA,CAACrB,EAAE,CAAEK,IAAI,CAAE,CAC5C,GAAI,CACF,KAAM,CAAAd,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,EAAI,CAC/CG,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAC,cAAc,CAAE,kBAAkB,CAAC,CAC7CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACF,IAAI,CAC3B,CAAC,CAAC,CAEF,GAAI,CAACd,GAAG,CAACE,EAAE,CAAE,CACX,KAAM,CAAAoB,SAAS,CAAG,KAAM,CAAAtB,GAAG,CAACU,IAAI,CAAC,CAAC,CAClC,KAAM,IAAI,CAAAP,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK+B,SAAS,EAAI,yBAAyB,CAAE,CAAC,CAClF,CAEA,MAAO,CAAAtB,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClD,KAAM,CAAAA,KAAK,CACb,CACF,CAEA,MAAO,eAAe,CAAAwB,aAAaA,CAACtB,EAAE,CAAE,CACtC,GAAI,CACF,KAAM,CAAAT,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAIV,GAAG,eAAAU,MAAA,CAAakB,EAAE,EAAI,CAAEG,MAAM,CAAE,QAAS,CAAC,CAAC,CAEtE,GAAI,CAACZ,GAAG,CAACE,EAAE,CAAE,CACX,KAAM,CAAAoB,SAAS,CAAG,KAAM,CAAAtB,GAAG,CAACU,IAAI,CAAC,CAAC,CAClC,KAAM,IAAI,CAAAP,KAAK,SAAAZ,MAAA,CAASS,GAAG,CAACI,MAAM,OAAAb,MAAA,CAAK+B,SAAS,EAAI,uBAAuB,CAAE,CAAC,CAChF,CAEA,MAAO,CAAAtB,GAAG,CAACM,IAAI,CAAC,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdV,OAAO,CAACU,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD,KAAM,CAAAA,KAAK,CACb,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}